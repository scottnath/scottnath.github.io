<!DOCTYPE html><html lang="en"><head><script defer data-domain="scottnath.com" src="https://plausible.io/js/script.js" type="text/partytown"></script><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v3.2.3"><link rel="preload" as="image" href="/scott-nath-profile-pic.jpeg"><!-- Canonical URL --><link rel="canonical" href="https://scottnath.com/blahg/introducing-storydocker/"><!-- Primary Meta Tags --><title>StoryDocker: Storybook, but it&#39;s a microservice</title><meta name="title" content="StoryDocker: Storybook, but it's a microservice"><meta name="description" content="StoryDocker is an open-source tool which allows local Storybook development without dependencies by leveraging docker containers"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://scottnath.com/blahg/introducing-storydocker/"><meta property="og:title" content="StoryDocker: Storybook, but it's a microservice"><meta property="og:description" content="StoryDocker is an open-source tool which allows local Storybook development without dependencies by leveraging docker containers"><meta property="og:image" content="https://scottnath.com/storydocker-underwater.jpeg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://scottnath.com/blahg/introducing-storydocker/"><meta property="twitter:title" content="StoryDocker: Storybook, but it's a microservice"><meta property="twitter:description" content="StoryDocker is an open-source tool which allows local Storybook development without dependencies by leveraging docker containers"><meta property="twitter:image" content="https://scottnath.com/storydocker-underwater.jpeg"><link rel="stylesheet" href="/_astro/_...slug_.13be7c34.css" />
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><script>/** @license Copyright 2020 Google LLC (BSD-3-Clause) */
/** Bundled JS generated from "@astrojs/lit/client-shim.js" */
var N = Object.defineProperty;
var i = (t, n) => () => (t && (n = t((t = 0))), n);
var b = (t, n) => {
	for (var a in n) N(t, a, { get: n[a], enumerable: !0 });
};
function s() {
	if (d === void 0) {
		let t = document.createElement('div');
		(t.innerHTML = '<div><template shadowroot="open" shadowrootmode="open"></template></div>'),
			(d = !!t.firstElementChild.shadowRoot);
	}
	return d;
}
var d,
	m = i(() => {});
var p,
	c,
	f,
	u = i(() => {
		(p = (t) => t.parentElement === null),
			(c = (t) => t.tagName === 'TEMPLATE'),
			(f = (t) => t.nodeType === Node.ELEMENT_NODE);
	});
var h,
	E = i(() => {
		m();
		u();
		h = (t) => {
			var n;
			if (s()) return;
			let a = [],
				e = t.firstElementChild;
			for (; e !== t && e !== null; )
				if (c(e)) a.push(e), (e = e.content);
				else if (e.firstElementChild !== null) e = e.firstElementChild;
				else if (f(e) && e.nextElementSibling !== null) e = e.nextElementSibling;
				else {
					let o;
					for (; e !== t && e !== null; )
						if (p(e)) {
							o = a.pop();
							let r = o.parentElement,
								l = o.getAttribute('shadowroot');
							if (((e = o), l === 'open' || l === 'closed')) {
								let y = o.hasAttribute('shadowrootdelegatesfocus');
								try {
									r.attachShadow({ mode: l, delegatesFocus: y }).append(o.content);
								} catch {}
							} else o = void 0;
						} else {
							let r = e.nextElementSibling;
							if (r != null) {
								(e = r), o !== void 0 && o.parentElement.removeChild(o);
								break;
							}
							let l =
								(n = e.parentElement) === null || n === void 0 ? void 0 : n.nextElementSibling;
							if (l != null) {
								(e = l), o !== void 0 && o.parentElement.removeChild(o);
								break;
							}
							(e = e.parentElement), o !== void 0 && (o.parentElement.removeChild(o), (o = void 0));
						}
				}
		};
	});
var w = i(() => {
	E();
});
var v = {};
b(v, { hasNativeDeclarativeShadowRoots: () => s, hydrateShadowRoots: () => h });
var S = i(() => {
	m();
	w();
});
async function g() {
	let { hydrateShadowRoots: t } = await Promise.resolve().then(() => (S(), v));
	window.addEventListener('DOMContentLoaded', () => t(document.body), { once: true });
}
var x = new DOMParser()
	.parseFromString(
		'<p><template shadowroot="open" shadowrootmode="open"></template></p>',
		'text/html',
		{
			includeShadowRoots: !0,
		}
	)
	.querySelector('p');
(!x || !x.shadowRoot) && g();
</script>
<script>!(function(w,p,f,c){c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.8.0 - MIT builder.io */
!function(t,e,n,i,r,o,a,d,s,c,l,p){function u(){p||(p=1,"/"==(a=(o.lib||"/~partytown/")+(o.debug?"debug/":""))[0]&&(s=e.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(f,1e4),e.addEventListener("pt0",w),r?h(1):n.serviceWorker?n.serviceWorker.register(a+(o.swPath||"partytown-sw.js"),{scope:a}).then((function(t){t.active?h():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&h()}))}),console.error):f())))}function h(t){c=e.createElement(t?"script":"iframe"),t||(c.setAttribute("style","display:block;width:0;height:0;border:0;visibility:hidden"),c.setAttribute("aria-hidden",!0)),c.src=a+"partytown-"+(t?"atomics.js?v=0.8.0":"sandbox-sw.html?"+Date.now()),e.querySelector(o.sandboxParent||"body").appendChild(c)}function f(n,r){for(w(),i==t&&(o.forward||[]).map((function(e){delete t[e.split(".")[0]]})),n=0;n<s.length;n++)(r=e.createElement("script")).innerHTML=s[n].innerHTML,e.head.appendChild(r);c&&c.parentNode.removeChild(c)}function w(){clearTimeout(d)}o=t.partytown||{},i==t&&(o.forward||[]).map((function(e){l=t,e.split(".").map((function(e,n,i){l=l[i[n]]=n+1<i.length?"push"==i[n+1]?[]:l[i[n]]||{}:function(){(t._ptf=t._ptf||[]).push(i,arguments)}}))})),"complete"==e.readyState?u():(t.addEventListener("DOMContentLoaded",u),t.addEventListener("load",u))}(window,document,navigator,top,window.crossOriginIsolated);</script><style>[data-astro-transition-scope="astro-x5ucuxqb-1"] { view-transition-name: astro-x5ucuxqb-1; }@layer astro { ::view-transition-old(astro-x5ucuxqb-1) { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }::view-transition-new(astro-x5ucuxqb-1) { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back]::view-transition-old(astro-x5ucuxqb-1) { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back]::view-transition-new(astro-x5ucuxqb-1) { 
	animation-name: astroFadeIn, astroSlideFromLeft; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-x5ucuxqb-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-x5ucuxqb-1"] { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-x5ucuxqb-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-x5ucuxqb-1"] { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-x5ucuxqb-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-x5ucuxqb-1"] { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-x5ucuxqb-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-x5ucuxqb-1"] { 
	animation-name: astroFadeIn, astroSlideFromLeft; }</style></head><body><header data-astro-cid-3ef6ksr2><h2 data-astro-cid-3ef6ksr2>Scott Nath</h2><nav data-astro-cid-3ef6ksr2><a href="/" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg>Home</a><a href="/blahg" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg>Blahg</a><a href="/resume" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg>Resume</a></nav></header><main data-astro-transition-scope="astro-x5ucuxqb-1"><article><img width="720" height="360" src="/storydocker-underwater.jpeg" alt=""><h1 class="title">StoryDocker: Storybook, but it&#39;s a microservice</h1><time datetime="2023-04-10T00:00:00.000Z">Apr 10, 2023</time><hr><p>Problem: your UI application is complicated and requires a lot of dependencies, but you also need to use <a href="https://storybook.js.org/docs/html/get-started/why-storybook">Storybook</a> to prototype, test, and collaborate with non-technical folks.</p>
<p>Solution: A full-featured Storybook development environment without all those pesky dependencies!</p>
<h2 id="tldr">tl;dr</h2>
<p>StoryDocker is an open-source tool which allows local Storybook development without dependencies by leveraging docker containers</p>
<ul>
<li><a href="https://github.com/storydocker/storydocker">StoryDocker on GitHub</a></li>
<li>Multiple <a href="https://github.com/storydocker/storydocker-examples">StoryDocker examples</a> including React, Vue, Svelte, Lit, and vanilla/no-framework</li>
</ul>
<h2 id="why-storybook-as-a-microservice">Why Storybook as a microservice?</h2>
<p>A NodeJS application’s dependencies are time-consuming to maintain. Your app probably has a bunch of dependencies too - for app-building, connecting to your back-end, external component libraries, all the devOps doo-dads, it can get <em>big</em>.</p>
<p>A typical setup to implement Storybook will add a whole stack of new dependencies that have nothing to do with your app! Sometimes Storybook’s dependencies will fight with your app’s dependencies…in which case, you may go without Storybook features, reducing it’s usefulness.</p>
<p>A popular solution for implementing Storybook for a large app is giving it a separate workspace in a monorepo. But that Storybook instance is tied to that repo - so if you have other UI repos you maintain, they’ll need their own Storybook workspace. <a href="https://nx.dev/recipes/storybook">Nx has some excellent monorepo+Storybook solutions</a> but those require all your micro-frontends and UI apps to be in the one monorepo - not ideal if you have a lot of cooks in that kitchen.</p>
<p>Removing Storybook’s implementation from your application’s environment reduces overhead and dependency overload. Making it a microservice allows it to be used when it’s needed and stay out of the way when it’s not.</p>
<h2 id="how-storydocker-works">How StoryDocker works</h2>
<p>StoryDocker internally creates a very basic monorepo using out-of-the-box <a href="https://docs.npmjs.com/cli/v9/using-npm/workspaces">npm workspaces</a>. The Storybook setup is contained in it’s own workspace and includes dependencies for Storybook implementations that generate dev environments for React, Vue, Svelte, Lit, and/or non-js-frameworks applications. Currently it only works for apps which use Vite as their builder.</p>
<p>StoryDocker generates <a href="https://github.com/storydocker/storydocker/pkgs/container/storydocker">a docker image</a> available via GitHub’s Container registry. This docker image can be combined with your app using a <code>Dockerfile</code> and a <code>docker-compose.yml</code> file.</p>
<p>Full instructions available in <a href="https://github.com/storydocker/storydocker#getting-started">StoryDocker’s <code>getting started</code> section</a></p>
<h2 id="how-to-use-storydocker-with-your-ui">How to use StoryDocker with your UI</h2>
<p>The best way is to checkout the StoryDocker getting started instructions or to dig through or directory any of the <a href="https://github.com/storydocker/storydocker-examples">StoryDocker examples</a>. The example apps include React, Vue, Svelte, Lit, and vanilla/no-framework implementations. Copy the directory and run <code>docker compose up</code> and you’re good to go.</p>
<p>It should work great for any app that uses Vite and any of the listed frameworks. It’s a fast way to get a Storybook instance quickly attached to your application.</p>
<h2 id="you-should-steal-the-concept-tho">You should steal the concept tho</h2>
<p>StoryDocker is a catch-all to add Storybook to a wide range of apps quickly. It was made using the default scaffolding tools from Storybook and Vite. It uses an extremely basic monorepo, with a simple npm-workspaces structure. It is easy to duplicate.</p>
<p>Your organization might want more/different features beyond what StoryDocker provides, you might need older/different versions of things, or you just don’t want to be dependent on another external library - so I encourage you to copy the concept and add your own spin. Extracting a dependency-heavy setup from your current app environment, while still retaining all it’s features, can save tons of time and money.</p></article></main><footer data-astro-cid-sz7xmlte><hr data-astro-cid-sz7xmlte>
&copy; 2023&nbsp;Scott Nath All rights reserved.
</footer></body></html>