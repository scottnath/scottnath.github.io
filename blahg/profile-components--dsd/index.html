<!DOCTYPE html><html lang="en-US"> <head><script defer data-domain="scottnath.com" src="https://plausible.io/js/script.js" type="text/partytown"></script> <script defer data-domain="scottnath.com" src="https://plausible.io/js/script.outbound-links.js" type="text/partytown"></script> <!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-mind-blown.ico" id="favicon"><meta name="generator" content="Astro v4.4.2"><link rel="preload" as="image" href="/profile-components-blahg/profile-components-dsd-header.avif"><!-- Canonical URL --><link rel="canonical" href="https://scottnath.com/blahg/profile-components--dsd/"><!-- Primary Meta Tags --><title>Profile Components: SSR with Declarative Shadow DOM</title><meta name="title" content="Profile Components: SSR with Declarative Shadow DOM"><meta name="description" content="Enhancing Profile Components with Declarative Shadow DOM and showing examples for Server Side Rendering"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://scottnath.com/blahg/profile-components--dsd/"><meta property="og:title" content="Profile Components: SSR with Declarative Shadow DOM"><meta property="og:description" content="Enhancing Profile Components with Declarative Shadow DOM and showing examples for Server Side Rendering"><meta property="og:image" content="https://scottnath.com/profile-components-blahg/profile-components-dsd-header.avif"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://scottnath.com/blahg/profile-components--dsd/"><meta property="twitter:title" content="Profile Components: SSR with Declarative Shadow DOM"><meta property="twitter:description" content="Enhancing Profile Components with Declarative Shadow DOM and showing examples for Server Side Rendering"><meta property="twitter:image" content="https://scottnath.com/profile-components-blahg/profile-components-dsd-header.avif"><link rel="stylesheet" href="/_astro/_slug_.BZZEeUR_.css" /><script type="module">const e=()=>{const i=document.querySelector("#favicon");if(document.hidden){const n=i?.href;document.initialFavicon=n,i.href="/favicon-clown.ico"}else document.initialFavicon!==""&&(i.href=document.initialFavicon)};document.addEventListener("visibilitychange",e,!0);document.initialFavicon=document.querySelector("#favicon").href;
</script>
<script>/** @license Copyright 2020 Google LLC (BSD-3-Clause) */
/** Bundled JS generated from "@astrojs/lit/client-shim.js" */
var N = Object.defineProperty;
var i = (t, n) => () => (t && (n = t((t = 0))), n);
var b = (t, n) => {
	for (var a in n) N(t, a, { get: n[a], enumerable: !0 });
};
function s() {
	if (d === void 0) {
		let t = document.createElement('div');
		(t.innerHTML = '<div><template shadowroot="open" shadowrootmode="open"></template></div>'),
			(d = !!t.firstElementChild.shadowRoot);
	}
	return d;
}
var d,
	m = i(() => {});
var p,
	c,
	f,
	u = i(() => {
		(p = (t) => t.parentElement === null),
			(c = (t) => t.tagName === 'TEMPLATE'),
			(f = (t) => t.nodeType === Node.ELEMENT_NODE);
	});
var h,
	E = i(() => {
		m();
		u();
		h = (t) => {
			var n;
			if (s()) return;
			let a = [],
				e = t.firstElementChild;
			for (; e !== t && e !== null; )
				if (c(e)) a.push(e), (e = e.content);
				else if (e.firstElementChild !== null) e = e.firstElementChild;
				else if (f(e) && e.nextElementSibling !== null) e = e.nextElementSibling;
				else {
					let o;
					for (; e !== t && e !== null; )
						if (p(e)) {
							o = a.pop();
							let r = o.parentElement,
								l = o.getAttribute('shadowroot');
							if (((e = o), l === 'open' || l === 'closed')) {
								let y = o.hasAttribute('shadowrootdelegatesfocus');
								try {
									r.attachShadow({ mode: l, delegatesFocus: y }).append(o.content);
								} catch {}
							} else o = void 0;
						} else {
							let r = e.nextElementSibling;
							if (r != null) {
								(e = r), o !== void 0 && o.parentElement.removeChild(o);
								break;
							}
							let l =
								(n = e.parentElement) === null || n === void 0 ? void 0 : n.nextElementSibling;
							if (l != null) {
								(e = l), o !== void 0 && o.parentElement.removeChild(o);
								break;
							}
							(e = e.parentElement), o !== void 0 && (o.parentElement.removeChild(o), (o = void 0));
						}
				}
		};
	});
var w = i(() => {
	E();
});
var v = {};
b(v, { hasNativeDeclarativeShadowRoots: () => s, hydrateShadowRoots: () => h });
var S = i(() => {
	m();
	w();
});
async function g() {
	let { hydrateShadowRoots: t } = await Promise.resolve().then(() => (S(), v));
	window.addEventListener('DOMContentLoaded', () => t(document.body), { once: true });
}
var x = new DOMParser()
	.parseFromString(
		'<p><template shadowroot="open" shadowrootmode="open"></template></p>',
		'text/html',
		{
			includeShadowRoots: !0,
		}
	)
	.querySelector('p');
(!x || !x.shadowRoot) && g();
</script>
<script>!(function(w,p,f,c){c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.8.0 - MIT builder.io */
!function(t,e,n,i,r,o,a,d,s,c,l,p){function u(){p||(p=1,"/"==(a=(o.lib||"/~partytown/")+(o.debug?"debug/":""))[0]&&(s=e.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(f,1e4),e.addEventListener("pt0",w),r?h(1):n.serviceWorker?n.serviceWorker.register(a+(o.swPath||"partytown-sw.js"),{scope:a}).then((function(t){t.active?h():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&h()}))}),console.error):f())))}function h(t){c=e.createElement(t?"script":"iframe"),t||(c.setAttribute("style","display:block;width:0;height:0;border:0;visibility:hidden"),c.setAttribute("aria-hidden",!0)),c.src=a+"partytown-"+(t?"atomics.js?v=0.8.0":"sandbox-sw.html?"+Date.now()),e.querySelector(o.sandboxParent||"body").appendChild(c)}function f(n,r){for(w(),i==t&&(o.forward||[]).map((function(e){delete t[e.split(".")[0]]})),n=0;n<s.length;n++)(r=e.createElement("script")).innerHTML=s[n].innerHTML,e.head.appendChild(r);c&&c.parentNode.removeChild(c)}function w(){clearTimeout(d)}o=t.partytown||{},i==t&&(o.forward||[]).map((function(e){l=t,e.split(".").map((function(e,n,i){l=l[i[n]]=n+1<i.length?"push"==i[n+1]?[]:l[i[n]]||{}:function(){(t._ptf=t._ptf||[]).push(i,arguments)}}))})),"complete"==e.readyState?u():(t.addEventListener("DOMContentLoaded",u),t.addEventListener("load",u))}(window,document,navigator,top,window.crossOriginIsolated);;((d,s)=>(s=d.currentScript,d.addEventListener('astro:before-swap',()=>s.remove(),{once:true})))(document);</script><style>[data-astro-transition-scope="astro-x3xkme5z-1"] { view-transition-name: astro-x3xkme5z-1; }@layer astro { ::view-transition-old(astro-x3xkme5z-1) { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }::view-transition-new(astro-x3xkme5z-1) { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back]::view-transition-old(astro-x3xkme5z-1) { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back]::view-transition-new(astro-x3xkme5z-1) { 
	animation-name: astroFadeIn, astroSlideFromLeft; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-name: astroFadeIn, astroSlideFromLeft; }</style></head> <body> <a href="#main" id="skip-to-main">Skip to main content</a> <header data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2> <span class="name" data-astro-cid-3ef6ksr2>Scott Nath</span> <span class="title" data-astro-cid-3ef6ksr2>Frontend Architect</span> </h2> <nav data-astro-cid-2hp2wczs> <dope-stripes data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>:host{display:block;position:relative;--angle-x-start: 35%;--angle-width: 5%;--angle-y-end: 40px;--stripe-height: 16px;--stripe-color: #ffe27a;width:100%;min-height:var(--stripe-height)}::slotted(dope-stripe),dope-stripe{--no-top-margin: -1}dope-stripe:first-child{--no-top-margin: 0}.stripes:not(:has(dope-stripe)) ::slotted(dope-stripe:first-child){--no-top-margin: 0}</style><!--lit-part grV36YUwDSo=--><div class="stripes" part="stripes" exportparts="stripe">
      <!--lit-part--><!--/lit-part-->
      <slot></slot>
  </div><!--/lit-part--></template> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ffd273"><slot></slot></div><!--/lit-part--></template> <a href="/" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>home</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ffbf57"><slot></slot></div><!--/lit-part--></template> <a href="/whoami" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>whoami</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ffa43b"><slot></slot></div><!--/lit-part--></template> <a href="/blahg" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>blahg</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ff8920"><slot></slot></div><!--/lit-part--></template> <a href="/resume" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>resume</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ff6e05"><slot></slot></div><!--/lit-part--></template></dope-stripe> </dope-stripes> </nav>  <img src="/scott-nath-profile-photo.avif" alt="Scott Nath's picture" width="400" height="400" class="avatar" data-astro-cid-3ef6ksr2> <address class="socials" aria-label="Also find me on these sites" data-astro-cid-6jz5wqfy> <a rel="me" href="https://github.com/scottnath" aria-label="Scott Nath on GitHub" data-astro-cid-6jz5wqfy><img src="/_astro/github-inverse.5c5sSg3g.svg" alt="GitHub logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>GitHub</span></a><a rel="me" href="https://dev.to/scottnath" aria-label="Scott Nath's articles on dev.to" data-astro-cid-6jz5wqfy><img src="/_astro/dev.DPyAJ8Ri.svg" alt="dev.to logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>dev.to</span></a><a rel="me" href="https://linkedin.com/in/scottnath" aria-label="Connect with Scott Nath on LinkedIn" data-astro-cid-6jz5wqfy><img src="/_astro/linkedin.C92OM-O6.svg" alt="LinkedIn logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>LinkedIn</span></a><a rel="me" href="https://mastodon.social/@scottnath" aria-label="Read Scott Nath blah on Mastodon" data-astro-cid-6jz5wqfy><img src="/_astro/Mastodon.QaBq5b1c.svg" alt="Mastodon logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>Mastodon</span></a> </address>  </header>  <main id="main" data-astro-transition-scope="astro-x3xkme5z-1">  <article class="blog-post"> <img width="100%" height="auto" src="/profile-components-blahg/profile-components-dsd-header.avif" alt=""> <h1 class="title">Profile Components: SSR with Declarative Shadow DOM</h1> <p>Enhancing Profile Components with Declarative Shadow DOM and showing examples for Server Side Rendering</p> <time datetime="2024-02-21T00:00:00.000Z"> Feb 21, 2024 </time>  <hr> <div class="readable"> <p>With the <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/123#html">official release of <code>shadowrootmode</code>-supporting Firefox v123</a>, itâ€™s time to upgrade the profile components with Declarative Shadow DOM functionality!</p>
<h2 id="tldr">tl;dr</h2>
<ul>
<li><a href="https://scottnath.com/profile-components/?path=/docs/github-declarative-shadow-dom--docs">DSD docs for GitHub profile components</a></li>
<li><a href="https://scottnath.com/profile-components/?path=/docs/devto-declarative-shadow-dom--docs">DSD docs for dev.to profile components</a></li>
<li><a href="https://stackblitz.com/edit/profile-components?file=github-dsd.html&#x26;initialpath=github-dsd.html&#x26;view=preview">See the Stackblitz client-side example</a></li>
</ul>
<hr>
<h2 id="what-is-this">What is this?</h2>
<p>Four new methods have been added to allow generating a <code>template</code> tag with <code>shadowrootmode</code> containing the generated HTML and styles of a profile component. This was fairly trivial to add due to the Javascript, HTML and CSS living in separate files. (see <a href="/blahg/profile-components/#%F0%9F%91%B7">ðŸ‘· DX: Separate files for Javascript, HTML, and CSS</a>).</p>
<p>Each of the four components now have a <code>dsd</code> method which can be used to generate something like this:</p>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">template</span><span style="color:#9CDCFE"> shadowrootmode</span><span style="color:#E6E6E6">=</span><span style="color:#CE9178">"open"</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">  &#x3C;</span><span style="color:#F44747">styles</span><span style="color:#808080">></span><span style="color:#E6E6E6">(...css styles for GitHub component)</span><span style="color:#808080">&#x3C;/</span><span style="color:#F44747">styles</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">  &#x3C;</span><span style="color:#569CD6">section</span><span style="color:#9CDCFE"> (...rest</span><span style="color:#9CDCFE"> of</span><span style="color:#9CDCFE"> generated</span><span style="color:#9CDCFE"> HTML)</span><span style="color:#F44747">&#x3C;/section</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">template</span><span style="color:#808080">></span></span></code></pre>
<p>This generated <code>template</code> can be used server-side when generating HTML output, or client-side after page load. Althoughâ€¦doing this client-side is weird franklyâ€¦likeâ€¦theyâ€™re web components, just use them as they were writtenâ€¦who knows though, maybe someone has a use for that feature ðŸ¤·.</p>
<h2 id="how-to-use-the-declarative-shadow-dom-methods">How to use the Declarative Shadow DOM methods</h2>
<p>Below are some examples of usage of the GitHub component (<a href="https://scottnath.com/profile-components/?path=/docs/github-declarative-shadow-dom--docs">see GitHub DSD docs</a>). Usage of the DEV components is pretty much the same - <a href="https://scottnath.com/profile-components/?path=/docs/devto-declarative-shadow-dom--docs">check out the dev.to DSD docs</a> for DEV usage examples.</p>
<p>The main value of these is when create HTML <em>before</em> it is rendered by the browser. Then when the browser renders it, the browser converts the DSD into actual Shadow DOM. These components are only presentational and do not have functionality added by the customElement - so DSD or regular web component usage results in the same thing!</p>
<h3 id="ssr-server-side-rendering-html-in-nodejs">SSR (Server Side Rendering) HTML in Node.js</h3>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6A9955">// import from npm module</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#E6E6E6"> { </span><span style="color:#9CDCFE">dsd</span><span style="color:#E6E6E6"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> 'profile-components/github-utils'</span><span style="color:#E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6">const</span><span style="color:#9CDCFE"> repos</span><span style="color:#D4D4D4"> =</span><span style="color:#9CDCFE"> JSON</span><span style="color:#E6E6E6">.</span><span style="color:#DCDCAA">stringify</span><span style="color:#E6E6E6">([</span></span>
<span class="line"><span style="color:#CE9178">  'scottnath/profile-components'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#CE9178">  'storydocker/storydocker'</span></span>
<span class="line"><span style="color:#E6E6E6">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6">const</span><span style="color:#9CDCFE"> generatedTemplate</span><span style="color:#D4D4D4"> =</span><span style="color:#C586C0"> await</span><span style="color:#DCDCAA"> dsd</span><span style="color:#E6E6E6">({</span></span>
<span class="line"><span style="color:#9CDCFE">  login:</span><span style="color:#CE9178"> 'scottnath'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">  avatar_url:</span><span style="color:#9CDCFE"> profilePic</span><span style="color:#E6E6E6">.</span><span style="color:#9CDCFE">src</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">  repos</span></span>
<span class="line"><span style="color:#E6E6E6">},</span><span style="color:#569CD6">true</span><span style="color:#E6E6E6">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">/**</span></span>
<span class="line"><span style="color:#6A9955">generatedTemplate contains:</span></span>
<span class="line"><span style="color:#6A9955">&#x3C;template shadowrootmode="open"></span></span>
<span class="line"><span style="color:#6A9955">  &#x3C;styles>(...css styles for GitHub component)&#x3C;/styles></span></span>
<span class="line"><span style="color:#6A9955">  &#x3C;section (...rest of generated HTML)&#x3C;/section></span></span>
<span class="line"><span style="color:#6A9955">&#x3C;/template></span></span>
<span class="line"><span style="color:#6A9955">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">// use this variable in a file pre-render to have a DSD-pre-populated element</span></span>
<span class="line"><span style="color:#569CD6">const</span><span style="color:#9CDCFE"> componentHTML</span><span style="color:#D4D4D4"> =</span><span style="color:#CE9178"> `&#x3C;github-user></span><span style="color:#569CD6">${</span><span style="color:#9CDCFE">generatedTemplate</span><span style="color:#569CD6">}</span><span style="color:#CE9178">&#x3C;/github-user>`</span><span style="color:#E6E6E6">;</span></span></code></pre>
<h3 id="server-side-render-in-an-astro-component">Server side render in an Astro component</h3>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#D4D4D4">---</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#E6E6E6"> {</span><span style="color:#9CDCFE">dsd</span><span style="color:#E6E6E6">} </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> 'profile-components/github-utils'</span><span style="color:#E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6">const</span><span style="color:#9CDCFE"> repos</span><span style="color:#D4D4D4"> =</span><span style="color:#9CDCFE"> JSON</span><span style="color:#E6E6E6">.</span><span style="color:#DCDCAA">stringify</span><span style="color:#E6E6E6">([</span><span style="color:#CE9178">'scottnath/profile-components'</span><span style="color:#E6E6E6">, </span><span style="color:#CE9178">'storydocker/storydocker'</span><span style="color:#E6E6E6">]);</span></span>
<span class="line"><span style="color:#569CD6">const</span><span style="color:#9CDCFE"> declaredDOM</span><span style="color:#D4D4D4"> =</span><span style="color:#C586C0"> await</span><span style="color:#DCDCAA"> dsd</span><span style="color:#E6E6E6">({</span></span>
<span class="line"><span style="color:#9CDCFE">  login:</span><span style="color:#CE9178"> 'scottnath'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">  repos</span></span>
<span class="line"><span style="color:#E6E6E6">},</span><span style="color:#569CD6">true</span><span style="color:#E6E6E6">)</span></span>
<span class="line"><span style="color:#D4D4D4">---</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#4EC9B0">github-user</span></span>
<span class="line"><span style="color:#9CDCFE">  data-theme</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"light_high_contrast"</span></span>
<span class="line"><span style="color:#9CDCFE">  set</span><span style="color:#E6E6E6">:</span><span style="color:#9CDCFE">html</span><span style="color:#D4D4D4">=</span><span style="color:#569CD6">{</span><span style="color:#9CDCFE">declaredDOM</span><span style="color:#569CD6">}</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">&#x3C;/</span><span style="color:#4EC9B0">github-user</span><span style="color:#808080">></span></span></code></pre>
<h3 id="client-side-rendering-via-unpkg">Client side rendering via unpkg</h3>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6A9955">&#x3C;!-- add empty elements to HTML --></span></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">github-repository</span><span style="color:#808080">>&#x3C;/</span><span style="color:#569CD6">github-repository</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">hr</span><span style="color:#808080"> /></span></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">github-user</span><span style="color:#808080">>&#x3C;/</span><span style="color:#569CD6">github-user</span><span style="color:#808080">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">script</span><span style="color:#9CDCFE"> type</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"module"</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#6A9955">  // import from unpkg</span></span>
<span class="line"><span style="color:#C586C0">  import</span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#9CDCFE">    user</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">    repo</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#D4D4D4">  } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> 'https://unpkg.com/profile-components/dist/github-utils.js'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">  // repo has it's own DSD method:</span></span>
<span class="line"><span style="color:#569CD6">  const</span><span style="color:#9CDCFE"> dsdRepo</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">repo</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">dsd</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">  /**</span></span>
<span class="line"><span style="color:#6A9955">    * Polyfill for Declarative Shadow DOM which, when triggered, converts</span></span>
<span class="line"><span style="color:#6A9955">    *  the template element into actual shadow DOM.</span></span>
<span class="line"><span style="color:#6A9955">    * This is only needed when injecting _after_ page is loaded</span></span>
<span class="line"><span style="color:#6A9955">    * @see https://developer.chrome.com/docs/css-ui/declarative-shadow-dom#polyfill</span></span>
<span class="line"><span style="color:#6A9955">    */</span></span>
<span class="line"><span style="color:#569CD6">  const</span><span style="color:#DCDCAA"> triggerAttachShadowRoots</span><span style="color:#D4D4D4"> = () </span><span style="color:#569CD6">=></span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#D4D4D4">    (</span><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> attachShadowRoots</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">root</span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#9CDCFE">      root</span></span>
<span class="line"><span style="color:#D4D4D4">        .</span><span style="color:#DCDCAA">querySelectorAll</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">'template[shadowrootmode]'</span><span style="color:#D4D4D4">)</span></span>
<span class="line"><span style="color:#D4D4D4">        .</span><span style="color:#DCDCAA">forEach</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">template</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#569CD6">          const</span><span style="color:#9CDCFE"> mode</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">template</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">getAttribute</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">'shadowrootmode'</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#569CD6">          const</span><span style="color:#9CDCFE"> shadowRoot</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">template</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">parentNode</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">attachShadow</span><span style="color:#D4D4D4">({ </span><span style="color:#9CDCFE">mode</span><span style="color:#D4D4D4"> });</span></span>
<span class="line"><span style="color:#9CDCFE">          shadowRoot</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">appendChild</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">template</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">content</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#9CDCFE">          template</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">remove</span><span style="color:#D4D4D4">();</span></span>
<span class="line"><span style="color:#DCDCAA">          attachShadowRoots</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">shadowRoot</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#D4D4D4">        });</span></span>
<span class="line"><span style="color:#D4D4D4">    })(</span><span style="color:#9CDCFE">document</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#D4D4D4">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">  /**</span></span>
<span class="line"><span style="color:#6A9955">    * Uses the "dsd" method to generate DSD, add the string of DSD content</span></span>
<span class="line"><span style="color:#6A9955">    *  to the element, then trigger the polyfill to convert the template</span></span>
<span class="line"><span style="color:#6A9955">    */</span></span>
<span class="line"><span style="color:#569CD6">  const</span><span style="color:#DCDCAA"> injectDSD</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">async</span><span style="color:#D4D4D4"> () </span><span style="color:#569CD6">=></span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#569CD6">    const</span><span style="color:#9CDCFE"> dsdHTML</span><span style="color:#D4D4D4"> = </span><span style="color:#C586C0">await</span><span style="color:#DCDCAA"> dsd</span><span style="color:#D4D4D4">({ </span><span style="color:#9CDCFE">username:</span><span style="color:#CE9178"> 'scottnath'</span><span style="color:#D4D4D4"> }, </span><span style="color:#569CD6">true</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#9CDCFE">    document</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">querySelector</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">'github-user'</span><span style="color:#D4D4D4">).</span><span style="color:#9CDCFE">innerHTML</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">dsdHTML</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#6A9955">    // now that the HTML is async-created, the polyfill can convert it</span></span>
<span class="line"><span style="color:#DCDCAA">    triggerAttachShadowRoots</span><span style="color:#D4D4D4">();</span></span>
<span class="line"><span style="color:#D4D4D4">  };</span></span>
<span class="line"><span style="color:#DCDCAA">  injectDSD</span><span style="color:#D4D4D4">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">  /**</span></span>
<span class="line"><span style="color:#6A9955">    * Uses the "dsdRepo" method to generate DSD, add the string of DSD content</span></span>
<span class="line"><span style="color:#6A9955">    *  to the element, then trigger the polyfill to convert the template</span></span>
<span class="line"><span style="color:#6A9955">    */</span></span>
<span class="line"><span style="color:#569CD6">  const</span><span style="color:#DCDCAA"> injectRepoDSD</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">async</span><span style="color:#D4D4D4"> () </span><span style="color:#569CD6">=></span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#569CD6">    const</span><span style="color:#9CDCFE"> dsdHTML</span><span style="color:#D4D4D4"> = </span><span style="color:#C586C0">await</span><span style="color:#DCDCAA"> dsdRepo</span><span style="color:#D4D4D4">(</span></span>
<span class="line"><span style="color:#D4D4D4">      { </span><span style="color:#9CDCFE">full_name:</span><span style="color:#CE9178"> 'scottnath/profile-components'</span><span style="color:#D4D4D4"> },</span></span>
<span class="line"><span style="color:#569CD6">      true</span></span>
<span class="line"><span style="color:#D4D4D4">    );</span></span>
<span class="line"><span style="color:#9CDCFE">    document</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">querySelector</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">'github-repository'</span><span style="color:#D4D4D4">).</span><span style="color:#9CDCFE">innerHTML</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">dsdHTML</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#6A9955">    // now that the HTML is async-created, the polyfill can convert it</span></span>
<span class="line"><span style="color:#DCDCAA">    triggerAttachShadowRoots</span><span style="color:#D4D4D4">();</span></span>
<span class="line"><span style="color:#D4D4D4">  };</span></span>
<span class="line"><span style="color:#DCDCAA">  injectRepoDSD</span><span style="color:#D4D4D4">();</span></span>
<span class="line"><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">script</span><span style="color:#808080">></span></span></code></pre>
<iframe width="100%" height="500" src="https://stackblitz.com/edit/profile-components?embed=1&#x26;file=github-dsd.html&#x26;view=preview&#x26;initialpath=github-dsd.html"></iframe> </div> </article>  </main> <footer data-astro-cid-sz7xmlte> <hr data-astro-cid-sz7xmlte>
&copy; 2024&nbsp;Scott Nath All rights reserved.
</footer>  </body></html>