<!DOCTYPE html><html lang="en-US"> <head><script defer data-domain="scottnath.com" src="https://plausible.io/js/script.js" type="text/partytown"></script> <script defer data-domain="scottnath.com" src="https://plausible.io/js/script.outbound-links.js" type="text/partytown"></script> <!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-mind-blown.ico" id="favicon"><meta name="generator" content="Astro v4.4.2"><link rel="preload" as="image" href="/blahg-assets/sharing-tests-with-a-handshake.avif"><!-- Canonical URL --><link rel="canonical" href="https://scottnath.com/blahg/sharing-tests-between-components/"><!-- Primary Meta Tags --><title>Sharing Interaction Tests Between Components</title><meta name="title" content="Sharing Interaction Tests Between Components"><meta name="description" content="How to share testing-library UI tests between child and parent components"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://scottnath.com/blahg/sharing-tests-between-components/"><meta property="og:title" content="Sharing Interaction Tests Between Components"><meta property="og:description" content="How to share testing-library UI tests between child and parent components"><meta property="og:image" content="https://scottnath.com/blahg-assets/sharing-tests-with-a-handshake.avif"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://scottnath.com/blahg/sharing-tests-between-components/"><meta property="twitter:title" content="Sharing Interaction Tests Between Components"><meta property="twitter:description" content="How to share testing-library UI tests between child and parent components"><meta property="twitter:image" content="https://scottnath.com/blahg-assets/sharing-tests-with-a-handshake.avif"><link rel="stylesheet" href="/_astro/_slug_.BZZEeUR_.css" /><script type="module">const e=()=>{const i=document.querySelector("#favicon");if(document.hidden){const n=i?.href;document.initialFavicon=n,i.href="/favicon-clown.ico"}else document.initialFavicon!==""&&(i.href=document.initialFavicon)};document.addEventListener("visibilitychange",e,!0);document.initialFavicon=document.querySelector("#favicon").href;
</script>
<script>/** @license Copyright 2020 Google LLC (BSD-3-Clause) */
/** Bundled JS generated from "@astrojs/lit/client-shim.js" */
var N = Object.defineProperty;
var i = (t, n) => () => (t && (n = t((t = 0))), n);
var b = (t, n) => {
	for (var a in n) N(t, a, { get: n[a], enumerable: !0 });
};
function s() {
	if (d === void 0) {
		let t = document.createElement('div');
		(t.innerHTML = '<div><template shadowroot="open" shadowrootmode="open"></template></div>'),
			(d = !!t.firstElementChild.shadowRoot);
	}
	return d;
}
var d,
	m = i(() => {});
var p,
	c,
	f,
	u = i(() => {
		(p = (t) => t.parentElement === null),
			(c = (t) => t.tagName === 'TEMPLATE'),
			(f = (t) => t.nodeType === Node.ELEMENT_NODE);
	});
var h,
	E = i(() => {
		m();
		u();
		h = (t) => {
			var n;
			if (s()) return;
			let a = [],
				e = t.firstElementChild;
			for (; e !== t && e !== null; )
				if (c(e)) a.push(e), (e = e.content);
				else if (e.firstElementChild !== null) e = e.firstElementChild;
				else if (f(e) && e.nextElementSibling !== null) e = e.nextElementSibling;
				else {
					let o;
					for (; e !== t && e !== null; )
						if (p(e)) {
							o = a.pop();
							let r = o.parentElement,
								l = o.getAttribute('shadowroot');
							if (((e = o), l === 'open' || l === 'closed')) {
								let y = o.hasAttribute('shadowrootdelegatesfocus');
								try {
									r.attachShadow({ mode: l, delegatesFocus: y }).append(o.content);
								} catch {}
							} else o = void 0;
						} else {
							let r = e.nextElementSibling;
							if (r != null) {
								(e = r), o !== void 0 && o.parentElement.removeChild(o);
								break;
							}
							let l =
								(n = e.parentElement) === null || n === void 0 ? void 0 : n.nextElementSibling;
							if (l != null) {
								(e = l), o !== void 0 && o.parentElement.removeChild(o);
								break;
							}
							(e = e.parentElement), o !== void 0 && (o.parentElement.removeChild(o), (o = void 0));
						}
				}
		};
	});
var w = i(() => {
	E();
});
var v = {};
b(v, { hasNativeDeclarativeShadowRoots: () => s, hydrateShadowRoots: () => h });
var S = i(() => {
	m();
	w();
});
async function g() {
	let { hydrateShadowRoots: t } = await Promise.resolve().then(() => (S(), v));
	window.addEventListener('DOMContentLoaded', () => t(document.body), { once: true });
}
var x = new DOMParser()
	.parseFromString(
		'<p><template shadowroot="open" shadowrootmode="open"></template></p>',
		'text/html',
		{
			includeShadowRoots: !0,
		}
	)
	.querySelector('p');
(!x || !x.shadowRoot) && g();
</script>
<script>!(function(w,p,f,c){c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.8.0 - MIT builder.io */
!function(t,e,n,i,r,o,a,d,s,c,l,p){function u(){p||(p=1,"/"==(a=(o.lib||"/~partytown/")+(o.debug?"debug/":""))[0]&&(s=e.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(f,1e4),e.addEventListener("pt0",w),r?h(1):n.serviceWorker?n.serviceWorker.register(a+(o.swPath||"partytown-sw.js"),{scope:a}).then((function(t){t.active?h():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&h()}))}),console.error):f())))}function h(t){c=e.createElement(t?"script":"iframe"),t||(c.setAttribute("style","display:block;width:0;height:0;border:0;visibility:hidden"),c.setAttribute("aria-hidden",!0)),c.src=a+"partytown-"+(t?"atomics.js?v=0.8.0":"sandbox-sw.html?"+Date.now()),e.querySelector(o.sandboxParent||"body").appendChild(c)}function f(n,r){for(w(),i==t&&(o.forward||[]).map((function(e){delete t[e.split(".")[0]]})),n=0;n<s.length;n++)(r=e.createElement("script")).innerHTML=s[n].innerHTML,e.head.appendChild(r);c&&c.parentNode.removeChild(c)}function w(){clearTimeout(d)}o=t.partytown||{},i==t&&(o.forward||[]).map((function(e){l=t,e.split(".").map((function(e,n,i){l=l[i[n]]=n+1<i.length?"push"==i[n+1]?[]:l[i[n]]||{}:function(){(t._ptf=t._ptf||[]).push(i,arguments)}}))})),"complete"==e.readyState?u():(t.addEventListener("DOMContentLoaded",u),t.addEventListener("load",u))}(window,document,navigator,top,window.crossOriginIsolated);;((d,s)=>(s=d.currentScript,d.addEventListener('astro:before-swap',()=>s.remove(),{once:true})))(document);</script><style>[data-astro-transition-scope="astro-x3xkme5z-1"] { view-transition-name: astro-x3xkme5z-1; }@layer astro { ::view-transition-old(astro-x3xkme5z-1) { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }::view-transition-new(astro-x3xkme5z-1) { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back]::view-transition-old(astro-x3xkme5z-1) { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back]::view-transition-new(astro-x3xkme5z-1) { 
	animation-name: astroFadeIn, astroSlideFromLeft; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-name: astroFadeIn, astroSlideFromLeft; }</style></head> <body> <a href="#main" id="skip-to-main">Skip to main content</a> <header data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2> <span class="name" data-astro-cid-3ef6ksr2>Scott Nath</span> <span class="title" data-astro-cid-3ef6ksr2>Frontend Architect</span> </h2> <nav data-astro-cid-2hp2wczs> <dope-stripes data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>:host{display:block;position:relative;--angle-x-start: 35%;--angle-width: 5%;--angle-y-end: 40px;--stripe-height: 16px;--stripe-color: #ffe27a;width:100%;min-height:var(--stripe-height)}::slotted(dope-stripe),dope-stripe{--no-top-margin: -1}dope-stripe:first-child{--no-top-margin: 0}.stripes:not(:has(dope-stripe)) ::slotted(dope-stripe:first-child){--no-top-margin: 0}</style><!--lit-part grV36YUwDSo=--><div class="stripes" part="stripes" exportparts="stripe">
      <!--lit-part--><!--/lit-part-->
      <slot></slot>
  </div><!--/lit-part--></template> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ffd273"><slot></slot></div><!--/lit-part--></template> <a href="/" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>home</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ffbf57"><slot></slot></div><!--/lit-part--></template> <a href="/whoami" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>whoami</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ffa43b"><slot></slot></div><!--/lit-part--></template> <a href="/blahg" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>blahg</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ff8920"><slot></slot></div><!--/lit-part--></template> <a href="/resume" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>resume</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ff6e05"><slot></slot></div><!--/lit-part--></template></dope-stripe> </dope-stripes> </nav>  <img src="/scott-nath-profile-photo.avif" alt="Scott Nath's picture" width="400" height="400" class="avatar" data-astro-cid-3ef6ksr2> <address class="socials" aria-label="Also find me on these sites" data-astro-cid-6jz5wqfy> <a rel="me" href="https://github.com/scottnath" aria-label="Scott Nath on GitHub" data-astro-cid-6jz5wqfy><img src="/_astro/github-inverse.5c5sSg3g.svg" alt="GitHub logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>GitHub</span></a><a rel="me" href="https://dev.to/scottnath" aria-label="Scott Nath's articles on dev.to" data-astro-cid-6jz5wqfy><img src="/_astro/dev.DPyAJ8Ri.svg" alt="dev.to logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>dev.to</span></a><a rel="me" href="https://linkedin.com/in/scottnath" aria-label="Connect with Scott Nath on LinkedIn" data-astro-cid-6jz5wqfy><img src="/_astro/linkedin.C92OM-O6.svg" alt="LinkedIn logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>LinkedIn</span></a><a rel="me" href="https://mastodon.social/@scottnath" aria-label="Read Scott Nath blah on Mastodon" data-astro-cid-6jz5wqfy><img src="/_astro/Mastodon.QaBq5b1c.svg" alt="Mastodon logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>Mastodon</span></a> </address>  </header>  <main id="main" data-astro-transition-scope="astro-x3xkme5z-1">  <article class="blog-post"> <img width="100%" height="auto" src="/blahg-assets/sharing-tests-with-a-handshake.avif" alt=""> <h1 class="title">Sharing Interaction Tests Between Components</h1> <p>How to share testing-library UI tests between child and parent components</p> <time datetime="2023-04-26T00:00:00.000Z"> Apr 26, 2023 </time>  <hr> <div class="readable"> <h2 id="tldr">tl;dr</h2>
<p>Descriptions and code examples for sharing tests between components. Includes info on writing tests for Storybook’s boilerplate components.</p>
<p><strong>Goal: reduce your testing footprint while increasing coverage</strong></p>
<ul>
<li><a href="https://codesandbox.io/p/sandbox/github/storydocker/storydocker/main/package/storybook-setup">codesandbox Storybook appliction with shared tests</a></li>
<li><a href="/blahg/shared-storybook-tests/">PART 1: Reusable Storybook Interaction Tests</a></li>
</ul>
<details>
<summary>Prerequisite knowledge</summary>
<ul>
<li><a href="https://storybook.js.org/docs/react/writing-tests/interaction-testing">Storybook interactive tests</a></li>
<li><a href="https://testing-library.com">Testing Library</a></li>
</ul>
</details>
<h2 id="why-share-tests-between-components">Why share tests between components?</h2>
<p>Time and money!</p>
<p>Shared tests keep your overall codebase DRY, as in <code>Don't Repeat Yourself</code>.</p>
<p>Sharing tests between different parts of your codebase can have several benefits. If you have two or more modules that depend on the same functionality, it can be useful to write tests that cover that functionality once and then share those tests between the modules. For UI components, that means sharing unit tests, user-interaction tests, and you can stack them together to make in-depth E2E test suites.</p>
<h2 id="testing-the-storybook-boilerplate-stories">Testing the Storybook Boilerplate Stories</h2>
<p>When using Storybook’s installer to add Storybook to your project, the installer includes three components with <code>stories</code> files to get you started. The three boilerplate stories are:</p>
<ul>
<li>Button</li>
<li>Header, which imports Button</li>
<li>Page, which imports Header</li>
</ul>
<p>These are generally the same components and stories across all frameworks. Since they build on each other, they’re a great use-case for shared tests.</p>
<h3 id="testing-the-button">Testing the Button</h3>
<p>The Button is the most complex with three props for styling, one for content, and one for user actions.</p>
<p>The Button tests were detailed in <a href="/blahg/shared-storybook-tests/">Reusable Storybook Interaction Tests</a>. The <code>Button.shared-spec.js</code> which contains the Button’s tests exports the following:</p>

























<table><thead><tr><th>method</th><th>description</th></tr></thead><tbody><tr><td><code>getElements</code></td><td>returns the elements to be tested</td></tr><tr><td><code>ensureElements</code></td><td>conditionally tests the elements</td></tr><tr><td><code>mouseInteraction</code></td><td>conditionally tests the mouse interactions</td></tr><tr><td><code>keyboardInteraction</code></td><td>conditionally tests the keyboard interactions</td></tr></tbody></table>
<h3 id="testing-the-header">Testing the Header</h3>
<p>The Header internally configures the Button component and has it’s own props. The following table shows the props the Header accepts:</p>

























<table><thead><tr><th>prop</th><th>description</th></tr></thead><tbody><tr><td><code>user</code></td><td>a simple object with a <code>name</code> property</td></tr><tr><td><code>onLogout</code></td><td>function called when a user triggers the <code>Log Out</code> button</td></tr><tr><td><code>onLogin</code></td><td>function called when a user triggers the <code>Log In</code> button</td></tr><tr><td><code>onCreateAccount</code></td><td>function called when a user triggers the <code>Sign Up</code> button</td></tr></tbody></table>
<h4 id="elements-to-gather-from-the-header">Elements to gather from the Header</h4>
<p>Things that will conditionally change based on the props:</p>





















<table><thead><tr><th>element</th><th>description</th></tr></thead><tbody><tr><td><code>buttons</code></td><td>an array of all buttons in Header</td></tr><tr><td><code>title</code></td><td>the <code>heading</code> (<code>h1</code>) element</td></tr><tr><td><code>header</code></td><td>the <code>header</code> element</td></tr></tbody></table>
<p><code>header</code> and <code>title</code> will always be the same since they are not changed by <code>props</code>, but we are testing them anyway to ensure they are present.</p>
<p><code>buttons</code> will change based on the <code>user</code> prop.</p>
<h4 id="tests-that-headers-tests-will-run">Tests that Header’s tests will run</h4>
<ul>
<li>Does the <code>header</code> element exist?</li>
<li>Does the <code>title</code> element exist?</li>
<li>Does the <code>title</code> element contain the text <code>Acme</code>?</li>
<li>If the user is logged in:
<ul>
<li>Is there one Button?</li>
</ul>
</li>
<li>If the user is not logged in:
<ul>
<li>Are there two Buttons?</li>
</ul>
</li>
</ul>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6A9955">/**</span></span>
<span class="line"><span style="color:#6A9955"> * Ensure elements are present and have the correct attributes/content</span></span>
<span class="line"><span style="color:#6A9955"> */</span></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#DCDCAA"> ensureElements</span><span style="color:#D4D4D4"> =</span><span style="color:#569CD6"> async</span><span style="color:#E6E6E6"> (</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">) </span><span style="color:#569CD6">=></span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#C586C0">  await</span><span style="color:#DCDCAA"> expect</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">.</span><span style="color:#9CDCFE">header</span><span style="color:#E6E6E6">).</span><span style="color:#DCDCAA">toBeTruthy</span><span style="color:#E6E6E6">();</span></span>
<span class="line"><span style="color:#C586C0">  await</span><span style="color:#DCDCAA"> expect</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">.</span><span style="color:#9CDCFE">title</span><span style="color:#E6E6E6">).</span><span style="color:#DCDCAA">toBeTruthy</span><span style="color:#E6E6E6">();</span></span>
<span class="line"><span style="color:#C586C0">  await</span><span style="color:#DCDCAA"> expect</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">.</span><span style="color:#9CDCFE">title</span><span style="color:#E6E6E6">).</span><span style="color:#DCDCAA">toHaveTextContent</span><span style="color:#E6E6E6">(</span><span style="color:#CE9178">'Acme'</span><span style="color:#E6E6E6">);</span></span>
<span class="line"><span style="color:#C586C0">  if</span><span style="color:#E6E6E6"> (</span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">.</span><span style="color:#9CDCFE">user</span><span style="color:#E6E6E6">) {</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#DCDCAA"> expect</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">buttons</span><span style="color:#E6E6E6">).</span><span style="color:#DCDCAA">toHaveLength</span><span style="color:#E6E6E6">(</span><span style="color:#B5CEA8">1</span><span style="color:#E6E6E6">);</span></span>
<span class="line"><span style="color:#E6E6E6">  } </span><span style="color:#C586C0">else</span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#DCDCAA"> expect</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">buttons</span><span style="color:#E6E6E6">).</span><span style="color:#DCDCAA">toHaveLength</span><span style="color:#E6E6E6">(</span><span style="color:#B5CEA8">2</span><span style="color:#E6E6E6">);</span></span>
<span class="line"><span style="color:#E6E6E6">  }</span></span>
<span class="line"><span style="color:#D4D4D4">  ...</span></span>
<span class="line"><span style="color:#E6E6E6">}</span></span></code></pre>
<h4 id="header-lets-button-test-itself">Header lets Button test itself</h4>
<p>Because the Button component has it’s own tests, the Header component doesn’t need to know how the Button works. It only needs to know that the Button works.</p>
<p>The Header tests each Button by using the Button’s <code>ensureElements</code> method.</p>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6A9955">// Import the Button's shared tests</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#E6E6E6"> { </span><span style="color:#9CDCFE">ensureElements</span><span style="color:#C586C0"> as</span><span style="color:#9CDCFE"> buttonEnsureElements</span><span style="color:#E6E6E6"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> "./Button.shared-spec"</span><span style="color:#E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#DCDCAA"> ensureElements</span><span style="color:#D4D4D4"> =</span><span style="color:#569CD6"> async</span><span style="color:#E6E6E6"> (</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">) </span><span style="color:#569CD6">=></span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#D4D4D4">  ...</span><span style="color:#6A9955"> // Header's tests, see above</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">  if</span><span style="color:#E6E6E6"> (</span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">.</span><span style="color:#9CDCFE">user</span><span style="color:#E6E6E6">) {</span></span>
<span class="line"><span style="color:#6A9955">    // Recreates button configuration from Header</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#DCDCAA"> buttonEnsureElements</span><span style="color:#E6E6E6">({ </span><span style="color:#9CDCFE">button:</span><span style="color:#9CDCFE"> buttons</span><span style="color:#E6E6E6">[</span><span style="color:#B5CEA8">0</span><span style="color:#E6E6E6">] }, {</span></span>
<span class="line"><span style="color:#9CDCFE">      label:</span><span style="color:#CE9178"> 'Log out'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">      size:</span><span style="color:#CE9178"> 'small'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#E6E6E6">    });</span></span>
<span class="line"><span style="color:#E6E6E6">  } </span><span style="color:#C586C0">else</span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#DCDCAA"> buttonEnsureElements</span><span style="color:#E6E6E6">({ </span><span style="color:#9CDCFE">button:</span><span style="color:#9CDCFE"> buttons</span><span style="color:#E6E6E6">[</span><span style="color:#B5CEA8">0</span><span style="color:#E6E6E6">] }, {</span></span>
<span class="line"><span style="color:#9CDCFE">      label:</span><span style="color:#CE9178"> 'Log in'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">      size:</span><span style="color:#CE9178"> 'small'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#E6E6E6">    });</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#DCDCAA"> buttonEnsureElements</span><span style="color:#E6E6E6">({ </span><span style="color:#9CDCFE">button:</span><span style="color:#9CDCFE"> buttons</span><span style="color:#E6E6E6">[</span><span style="color:#B5CEA8">1</span><span style="color:#E6E6E6">] }, {</span></span>
<span class="line"><span style="color:#9CDCFE">      label:</span><span style="color:#CE9178"> 'Sign up'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">      size:</span><span style="color:#CE9178"> 'small'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">      primary:</span><span style="color:#569CD6"> true</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#E6E6E6">    });</span></span>
<span class="line"><span style="color:#E6E6E6">  }</span></span></code></pre>
<h4 id="user-interactions-are-owned-by-button">User interactions are owned by Button</h4>
<p>The only interactive elements in the Header are the Buttons, so the only thing the Header needs to test for is how a keyboard user gets to the Button(s). Everything else, including whether the <code>onLogout</code>, <code>onLogin</code>, and <code>onCreateAccount</code> functions are called, are owned by the Button.</p>
<p>The Header tests it can get to the Button(s) by triggering a <code>tab</code> UserEvent within itself.</p>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6A9955">/**</span></span>
<span class="line"><span style="color:#6A9955"> * Test keyboard interaction</span></span>
<span class="line"><span style="color:#6A9955"> */</span></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#DCDCAA"> keyboardInteraction</span><span style="color:#D4D4D4"> =</span><span style="color:#569CD6"> async</span><span style="color:#E6E6E6"> (</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">) </span><span style="color:#569CD6">=></span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#569CD6">  const</span><span style="color:#E6E6E6"> { </span><span style="color:#9CDCFE">buttons</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">header</span><span style="color:#E6E6E6"> } </span><span style="color:#D4D4D4">=</span><span style="color:#9CDCFE"> elements</span><span style="color:#E6E6E6">;</span></span>
<span class="line"><span style="color:#C586C0">  if</span><span style="color:#E6E6E6"> (</span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">.</span><span style="color:#9CDCFE">user</span><span style="color:#E6E6E6">) {</span></span>
<span class="line"><span style="color:#6A9955">    // `focusTrap` keeps the user's keyboard within the `header` HTMLElement</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#9CDCFE"> userEvent</span><span style="color:#E6E6E6">.</span><span style="color:#DCDCAA">tab</span><span style="color:#E6E6E6">({ </span><span style="color:#9CDCFE">focusTrap:</span><span style="color:#9CDCFE"> header</span><span style="color:#E6E6E6"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">    // we expect the `Log Out` button to have focus</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#DCDCAA"> expect</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">buttons</span><span style="color:#E6E6E6">[</span><span style="color:#B5CEA8">0</span><span style="color:#E6E6E6">]).</span><span style="color:#DCDCAA">toHaveFocus</span><span style="color:#E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">    // Uses Button's keyboard interaction tests</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#DCDCAA"> buttonKeyboardInteraction</span><span style="color:#E6E6E6">({ </span><span style="color:#9CDCFE">button:</span><span style="color:#9CDCFE"> buttons</span><span style="color:#E6E6E6">[</span><span style="color:#B5CEA8">0</span><span style="color:#E6E6E6">] }, {</span></span>
<span class="line"><span style="color:#9CDCFE">      label:</span><span style="color:#CE9178"> 'Log out'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">      size:</span><span style="color:#CE9178"> 'small'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">      onClick:</span><span style="color:#9CDCFE"> args</span><span style="color:#E6E6E6">.</span><span style="color:#9CDCFE">onLogout</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#E6E6E6">    });</span></span>
<span class="line"><span style="color:#E6E6E6">  } </span><span style="color:#C586C0">else</span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#6A9955">    // again, starts within Header</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#9CDCFE"> userEvent</span><span style="color:#E6E6E6">.</span><span style="color:#DCDCAA">tab</span><span style="color:#E6E6E6">({ </span><span style="color:#9CDCFE">focusTrap:</span><span style="color:#9CDCFE"> header</span><span style="color:#E6E6E6"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">    // we expect the `Log In` button to have focus</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#DCDCAA"> expect</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">buttons</span><span style="color:#E6E6E6">[</span><span style="color:#B5CEA8">0</span><span style="color:#E6E6E6">]).</span><span style="color:#DCDCAA">toHaveFocus</span><span style="color:#E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">    // User hits `tab` once more</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#9CDCFE"> userEvent</span><span style="color:#E6E6E6">.</span><span style="color:#DCDCAA">tab</span><span style="color:#E6E6E6">({ </span><span style="color:#9CDCFE">focusTrap:</span><span style="color:#9CDCFE"> header</span><span style="color:#E6E6E6"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">    // we expect the `Sign Up` button to have focus</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#DCDCAA"> expect</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">buttons</span><span style="color:#E6E6E6">[</span><span style="color:#B5CEA8">1</span><span style="color:#E6E6E6">]).</span><span style="color:#DCDCAA">toHaveFocus</span><span style="color:#E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">    // Button tests for first button</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#DCDCAA"> buttonKeyboardInteraction</span><span style="color:#E6E6E6">({ </span><span style="color:#9CDCFE">button:</span><span style="color:#9CDCFE"> buttons</span><span style="color:#E6E6E6">[</span><span style="color:#B5CEA8">0</span><span style="color:#E6E6E6">] }, {</span></span>
<span class="line"><span style="color:#D4D4D4">      ...</span></span>
<span class="line"><span style="color:#E6E6E6">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">    // Button tests for second button</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#DCDCAA"> buttonKeyboardInteraction</span><span style="color:#E6E6E6">({ </span><span style="color:#9CDCFE">button:</span><span style="color:#9CDCFE"> buttons</span><span style="color:#E6E6E6">[</span><span style="color:#B5CEA8">1</span><span style="color:#E6E6E6">] }, {</span></span>
<span class="line"><span style="color:#D4D4D4">      ...</span></span>
<span class="line"><span style="color:#E6E6E6">    });</span></span>
<span class="line"><span style="color:#E6E6E6">  }</span></span>
<span class="line"><span style="color:#E6E6E6">}</span></span></code></pre>
<h3 id="testing-the-page">Testing the Page</h3>
<p>The Page component has no props, but in some frameworks the Page boilerplate component, relies on the JS Framework to control it’s state. All of the page content is inside the code (tsk tsk), so we’ll use the Header’s tests to test the Page.</p>
<h4 id="elements-to-gather-from-the-page">Elements to gather from the Page</h4>
<p>In this instance, we’ll use the Header’s <code>getElements</code> method to get the elements we need.</p>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6A9955">// Import the Button's shared tests</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#E6E6E6"> { </span><span style="color:#9CDCFE">getElements</span><span style="color:#C586C0"> as</span><span style="color:#9CDCFE"> headerGetElements</span><span style="color:#E6E6E6"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> './Header.shared-spec'</span><span style="color:#E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">/**</span></span>
<span class="line"><span style="color:#6A9955"> * Extract elements from an HTMLElement</span></span>
<span class="line"><span style="color:#6A9955"> */</span></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#DCDCAA"> getElements</span><span style="color:#D4D4D4"> =</span><span style="color:#569CD6"> async</span><span style="color:#E6E6E6"> (</span><span style="color:#9CDCFE">canvasElement</span><span style="color:#E6E6E6">) </span><span style="color:#569CD6">=></span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#569CD6">  const</span><span style="color:#9CDCFE"> screen</span><span style="color:#D4D4D4"> =</span><span style="color:#DCDCAA"> within</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">canvasElement</span><span style="color:#E6E6E6">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">  // Header knows how to get it's own elements</span></span>
<span class="line"><span style="color:#569CD6">  const</span><span style="color:#9CDCFE"> headerElements</span><span style="color:#D4D4D4"> =</span><span style="color:#C586C0"> await</span><span style="color:#DCDCAA"> headerGetElements</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">canvasElement</span><span style="color:#E6E6E6">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">  return</span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#6A9955">    // spreads the headerElements into this object</span></span>
<span class="line"><span style="color:#D4D4D4">    ...</span><span style="color:#9CDCFE">headerElements</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">    screen</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#E6E6E6">  };</span></span>
<span class="line"><span style="color:#E6E6E6">}</span></span></code></pre>
<h4 id="tests-that-pages-tests-will-run">Tests that Page’s tests will run</h4>
<p>It’ll just use Header’s tests:</p>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#C586C0">import</span><span style="color:#E6E6E6"> { </span></span>
<span class="line"><span style="color:#9CDCFE">    ensureElements</span><span style="color:#C586C0"> as</span><span style="color:#9CDCFE"> headerEnsureElements</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">    mouseInteraction</span><span style="color:#C586C0"> as</span><span style="color:#9CDCFE"> headerMouseInteraction</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#9CDCFE">    keyboardInteraction</span><span style="color:#C586C0"> as</span><span style="color:#9CDCFE"> headerKeyboardInteraction</span></span>
<span class="line"><span style="color:#E6E6E6">} </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> './Header.shared-spec'</span><span style="color:#E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">/**</span></span>
<span class="line"><span style="color:#6A9955"> * Ensure elements are present and have the correct attributes/content</span></span>
<span class="line"><span style="color:#6A9955"> */</span></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#DCDCAA"> ensureElements</span><span style="color:#D4D4D4"> =</span><span style="color:#569CD6"> async</span><span style="color:#E6E6E6"> (</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">step</span><span style="color:#E6E6E6">) </span><span style="color:#569CD6">=></span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#C586C0">  await</span><span style="color:#DCDCAA"> headerEnsureElements</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">step</span><span style="color:#E6E6E6">, </span><span style="color:#569CD6">true</span><span style="color:#E6E6E6">);</span></span>
<span class="line"><span style="color:#E6E6E6">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">/**</span></span>
<span class="line"><span style="color:#6A9955"> * Test mouse interaction</span></span>
<span class="line"><span style="color:#6A9955"> */</span></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#DCDCAA"> mouseInteraction</span><span style="color:#D4D4D4"> =</span><span style="color:#569CD6"> async</span><span style="color:#E6E6E6"> (</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">step</span><span style="color:#E6E6E6">) </span><span style="color:#569CD6">=></span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#C586C0">  await</span><span style="color:#DCDCAA"> headerMouseInteraction</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">step</span><span style="color:#E6E6E6">, </span><span style="color:#569CD6">true</span><span style="color:#E6E6E6">);</span></span>
<span class="line"><span style="color:#E6E6E6">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">/**</span></span>
<span class="line"><span style="color:#6A9955"> * Test keyboard interaction</span></span>
<span class="line"><span style="color:#6A9955"> */</span></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#DCDCAA"> keyboardInteraction</span><span style="color:#D4D4D4"> =</span><span style="color:#569CD6"> async</span><span style="color:#E6E6E6"> (</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">step</span><span style="color:#E6E6E6">) </span><span style="color:#569CD6">=></span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#C586C0">  await</span><span style="color:#DCDCAA"> headerKeyboardInteraction</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">elements</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">step</span><span style="color:#E6E6E6">, </span><span style="color:#569CD6">true</span><span style="color:#E6E6E6">);</span></span>
<span class="line"><span style="color:#E6E6E6">}</span></span></code></pre>
<h2 id="wrapping-up">Wrapping up</h2>
<p>Self-knowledge for components is the lynchpin with sharing tests. As deeply as possible, a component should know every possible change that can happen to it, and how to test for each possibility.</p>
<p>Using this across a design-system, this should vastly reduce the testing footprint. As long as you’re writing <code>testing-library</code> tests, this concept should allow the <code>shared-spec</code> tests to be used within your unit tests in addition to being used by Storybook stories.</p>
<p>Efficiency in all things - and productivity will follow!</p> </div> </article>  </main> <footer data-astro-cid-sz7xmlte> <hr data-astro-cid-sz7xmlte>
&copy; 2024&nbsp;Scott Nath All rights reserved.
</footer>  </body></html>