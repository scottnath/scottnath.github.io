<!DOCTYPE html><html lang="en"> <head><script defer data-domain="scottnath.com" src="https://plausible.io/js/script.js" type="text/partytown"></script> <script type="text/partytown" defer data-domain="scottnath.com" src="https://plausible.io/js/script.outbound-links.js"></script> <!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-mind-blown.ico" id="favicon"><meta name="generator" content="Astro v4.4.8"><link rel="preload" as="image" href="/scott-nath-profile-pic.jpeg"><!-- Canonical URL --><link rel="canonical" href="https://scottnath.com/blahg/virtual-screen-reader-with-storybook/"><!-- Primary Meta Tags --><title>Simple setup: Virtual Screen Reader in Storybook</title><meta name="title" content="Simple setup: Virtual Screen Reader in Storybook"><meta name="description" content="How to set up Storybook with Guidepup's Virtual Screen Reader and test what the screen reader speaks"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://scottnath.com/blahg/virtual-screen-reader-with-storybook/"><meta property="og:title" content="Simple setup: Virtual Screen Reader in Storybook"><meta property="og:description" content="How to set up Storybook with Guidepup's Virtual Screen Reader and test what the screen reader speaks"><meta property="og:image" content="https://scottnath.com/blahg-assets/simple-setup-guidepup-virtual-screen-reader-with-storybook.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://scottnath.com/blahg/virtual-screen-reader-with-storybook/"><meta property="twitter:title" content="Simple setup: Virtual Screen Reader in Storybook"><meta property="twitter:description" content="How to set up Storybook with Guidepup's Virtual Screen Reader and test what the screen reader speaks"><meta property="twitter:image" content="https://scottnath.com/blahg-assets/simple-setup-guidepup-virtual-screen-reader-with-storybook.png"><link rel="stylesheet" href="/_astro/_slug_.CF1cFZIF.css" />
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><script type="module">const e=()=>{const i=document.querySelector("#favicon");if(document.hidden){const n=i?.href;document.initialFavicon=n,i.href="/favicon-clown.ico"}else document.initialFavicon!==""&&(i.href=document.initialFavicon)};document.addEventListener("visibilitychange",e,!0);document.initialFavicon=document.querySelector("#favicon").href;
</script>
<script>!(function(w,p,f,c){c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.8.0 - MIT builder.io */
!function(t,e,n,i,r,o,a,d,s,c,l,p){function u(){p||(p=1,"/"==(a=(o.lib||"/~partytown/")+(o.debug?"debug/":""))[0]&&(s=e.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(f,1e4),e.addEventListener("pt0",w),r?h(1):n.serviceWorker?n.serviceWorker.register(a+(o.swPath||"partytown-sw.js"),{scope:a}).then((function(t){t.active?h():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&h()}))}),console.error):f())))}function h(t){c=e.createElement(t?"script":"iframe"),t||(c.setAttribute("style","display:block;width:0;height:0;border:0;visibility:hidden"),c.setAttribute("aria-hidden",!0)),c.src=a+"partytown-"+(t?"atomics.js?v=0.8.0":"sandbox-sw.html?"+Date.now()),e.querySelector(o.sandboxParent||"body").appendChild(c)}function f(n,r){for(w(),i==t&&(o.forward||[]).map((function(e){delete t[e.split(".")[0]]})),n=0;n<s.length;n++)(r=e.createElement("script")).innerHTML=s[n].innerHTML,e.head.appendChild(r);c&&c.parentNode.removeChild(c)}function w(){clearTimeout(d)}o=t.partytown||{},i==t&&(o.forward||[]).map((function(e){l=t,e.split(".").map((function(e,n,i){l=l[i[n]]=n+1<i.length?"push"==i[n+1]?[]:l[i[n]]||{}:function(){(t._ptf=t._ptf||[]).push(i,arguments)}}))})),"complete"==e.readyState?u():(t.addEventListener("DOMContentLoaded",u),t.addEventListener("load",u))}(window,document,navigator,top,window.crossOriginIsolated);;((d,s)=>(s=d.currentScript,d.addEventListener('astro:before-swap',()=>s.remove(),{once:true})))(document);</script><style>[data-astro-transition-scope="astro-x5ucuxqb-1"] { view-transition-name: astro-x5ucuxqb-1; }@layer astro { ::view-transition-old(astro-x5ucuxqb-1) { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }::view-transition-new(astro-x5ucuxqb-1) { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back]::view-transition-old(astro-x5ucuxqb-1) { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back]::view-transition-new(astro-x5ucuxqb-1) { 
	animation-name: astroFadeIn, astroSlideFromLeft; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-x5ucuxqb-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-x5ucuxqb-1"] { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-x5ucuxqb-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-x5ucuxqb-1"] { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-x5ucuxqb-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-x5ucuxqb-1"] { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-x5ucuxqb-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-x5ucuxqb-1"] { 
	animation-name: astroFadeIn, astroSlideFromLeft; }</style></head> <body> <header data-astro-cid-3ef6ksr2> <dope-stripes data-astro-cid-fb7ufwnd> <template shadowrootmode="open" data-astro-cid-fb7ufwnd><style>.stripes{width:100%;--left-width: 20%;--angle-width: 50px;--stripe-height: 20px;--stripe-angle: 39deg}.stripe{display:flex;align-items:left;margin:0 0 -1px;width:100%;--stripe-color: #ffe27a}.stripe span,.stripe:before,.stripe:after{content:" ";height:var(--stripe-height);display:block;background-color:var(--stripe-color);--rotated-height: calc(var(--angle-width) * tan(var(--stripe-angle)))}.stripe span{transform:skewY(var(--stripe-angle));transform-origin:0% 0%;flex:0 0 auto;width:calc(var(--angle-width));height:var(--stripe-height)}.stripe:before{width:var(--left-width);flex:0 0 auto}.stripe:after{flex:1 1 auto;transform:translateY(var(--rotated-height))}.blue{--stripe-color: rgb(0, 0, 255)}.yellow{--stripe-color: #ffe27a}.orange{--stripe-color: #ffa64d}.dark-orange{--stripe-color: #ff7f1a}</style><div class="stripes" part="stripes">
    <div class="stripe" style="--stripe-color: #ffd273"><span></span></div><div class="stripe" style="--stripe-color: #ffbf57"><span></span></div><div class="stripe" style="--stripe-color: #ffa43b"><span></span></div><div class="stripe" style="--stripe-color: #ff8920"><span></span></div><div class="stripe" style="--stripe-color: #ff6e05"><span></span></div>
  </div></template> </dope-stripes>  <div class="content" data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2> Scott Nath </h2> <h3 data-astro-cid-3ef6ksr2>Front-end architect</h3> <img src="/_astro/scott-nath-profile-photo.B_h8QufM.jpeg" alt="Scott Nath picture" width="400" height="400" class="avatar" data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Home </a>  <a href="/blahg" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Blahg </a>  <a href="/resume" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Resume </a>  </nav> <address class="socials" aria-label="Also find me on these sites" data-astro-cid-3ef6ksr2> <a rel="me" href="https://dev.to/scottnath" data-astro-cid-3ef6ksr2><img src="/_astro/dev.DPyAJ8Ri.svg" alt="DEV logo" data-astro-cid-3ef6ksr2><span data-astro-cid-3ef6ksr2>DEV</span></a> <a rel="me" href="https://github.com/scottnath" data-astro-cid-3ef6ksr2><img src="/_astro/github-inverse.5c5sSg3g.svg" alt="GitHub logo" data-astro-cid-3ef6ksr2><span data-astro-cid-3ef6ksr2>GitHub</span></a> <a rel="me" href="https://www.linkedin.com/in/scottnath" data-astro-cid-3ef6ksr2><img src="/_astro/linkedin.C92OM-O6.svg" alt="LinkedIn logo" data-astro-cid-3ef6ksr2><span data-astro-cid-3ef6ksr2>LinkedIn</span></a> <a rel="me" href="https://mastodon.social/@scottnath" data-astro-cid-3ef6ksr2><img src="/_astro/Mastodon.QaBq5b1c.svg" alt="Mastodon logo" data-astro-cid-3ef6ksr2><span data-astro-cid-3ef6ksr2>Mastodon</span></a> </address> </div> </header>  <main data-astro-transition-scope="astro-x5ucuxqb-1">  <article class="blog-post"> <img width="100%" height="auto" src="/blahg-assets/simple-setup-guidepup-virtual-screen-reader-with-storybook.png" alt=""> <h1 class="title">Simple setup: Virtual Screen Reader in Storybook</h1> <p>How to set up Storybook with Guidepup&#39;s Virtual Screen Reader and test what the screen reader speaks</p> <time datetime="2024-03-01T00:00:00.000Z"> Mar 1, 2024 </time>  <hr>  <p>Recent changes to the <a href="https://github.com/guidepup/virtual-screen-reader">@guidepup Virtual Screen Reader library</a> make it ridiculously easy to integrate into Storybook for use in your integration tests. This article shows how to get the basic setup going and how to write your first screen reader test in Storybook.</p>
<h2 id="tldr">tl;dr</h2>
<p>The Virtual Screen Reader is a great tool to mimic screen reader output and it’s works in Storybook without addons or configuration changes.</p>
<ul>
<li><a href="https://github.com/scottnath/virtual-screen-reader-storybook">Example GitHub repo</a></li>
<li><a href="https://github.com/scottnath/virtual-screen-reader-storybook/blob/main/stories/Header.stories.js">Example story file with VSR</a></li>
<li><a href="https://stackblitz.com/~/github.com/scottnath/virtual-screen-reader-storybook">Running app on Stackblitz</a></li>
<li><a href="https://www.guidepup.dev/docs/virtual">Virtual Screen Reader docs</a></li>
</ul>
<h2 id="what-is-the-virtual-screen-reader">What is the Virtual Screen Reader?</h2>
<p>The Virtual Screen Reader (<a href="https://www.guidepup.dev/docs/virtual">docs</a>, <a href="https://github.com/guidepup/virtual-screen-reader">GitHub</a>) is a library, available via NPM, which mimics the functionality of a screen reader. The VSR is from Guidepup (<a href="https://guidepup.dev/">guidepup.dev</a>), which has tons of screen reader tooling. The Virtual Screen Reader is the easiest @guidepup tool to set up and it can read your components like a screen reader would, giving you back the text for use in testing.</p>
<p>FYI: <em>Guidepup has a suite of tools that mirror and/or directly-simulate screen reader experiences and capture the results.  The tools are impressive and worth checking out if you want to automate accessibility testing into your workflow. For example, you can use directly use the system NVDA or Mac VoiceOver via Playwright. (check out <a href="https://dev.to/craigmorten/a11y-unlocked-screen-reader-automation-tests-3mc8">Craig’s dev.to article on implementing Guidepup with Playwright and Mac VoiceOver</a> for details)</em></p>
<h2 id="how-does-the-screen-reader-interpret-a-chunk-of-html">How does the screen reader interpret a chunk of HTML?</h2>
<p>Screen readers vary in interpretation, but this gives a <em>rough</em> understanding of how your HTML could get broken down by the VSR.</p>
<p>If the HTML a component puts out is this:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">header</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"storybook-header"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">svg</span><span style="color:#E1E4E8">>...&#x3C;/</span><span style="color:#85E89D">svg</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">>Acme&#x3C;/</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"welcome"</span><span style="color:#E1E4E8">>Welcome, &#x3C;</span><span style="color:#85E89D">b</span><span style="color:#E1E4E8">>Jane Doe&#x3C;/</span><span style="color:#85E89D">b</span><span style="color:#E1E4E8">>!&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">button</span><span style="color:#B392F0"> type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"button"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"..."</span><span style="color:#E1E4E8">>Log out&#x3C;/</span><span style="color:#85E89D">button</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">header</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>This is what the Virtual Screen Reader will translate it into:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">header</span><span style="color:#E1E4E8">> </span><span style="color:#6A737D">&#x3C;!--BANNER--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">>Acme&#x3C;/</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">> </span><span style="color:#6A737D">&#x3C;!--HEADING + text + HEADING-LEVEL--></span></span>
<span class="line"><span style="color:#E1E4E8">Welcome, </span><span style="color:#6A737D">&#x3C;!--Text--></span></span>
<span class="line"><span style="color:#E1E4E8">Jane Doe </span><span style="color:#6A737D">&#x3C;!--Text--></span></span>
<span class="line"><span style="color:#E1E4E8">! </span><span style="color:#6A737D">&#x3C;!--Punctuation--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">button</span><span style="color:#E1E4E8">>Log out&#x3C;/</span><span style="color:#85E89D">button</span><span style="color:#E1E4E8">> </span><span style="color:#6A737D">&#x3C;!--BUTTON + text--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">header</span><span style="color:#E1E4E8">> </span><span style="color:#6A737D">&#x3C;!--END OF BANNER--></span></span></code></pre>
<h2 id="how-to-set-up-your-storybook-instance-to-use-the-virtual-screen-reader">How to set up your Storybook instance to use the Virtual Screen Reader</h2>
<p>Follow these steps to test with VSR in your Storybook environment:</p>
<ol>
<li>Ensure your storybook environment is set up for Interaction tests (see <a href="https://storybook.js.org/docs/writing-tests/interaction-testing#set-up-the-interactions-addon">Storybook setup docs</a>)</li>
<li>Install the VSR npm module
<code>npm i @guidepup/virtual-screen-reader -D</code></li>
<li><em>PROFIT</em> - <strong>No addon setup or other configuration needed!</strong></li>
</ol>
<h2 id="how-to-write-a-storybook-integration-test-that-uses-the-virtual-screen-reader">How to write a Storybook integration test that uses the Virtual Screen Reader</h2>
<p>This example is using the default Header component that installs with default Storybook. We’ll be adding Interaction tests which will use VSR. You can see the <a href="https://github.com/scottnath/virtual-screen-reader-storybook/blob/main/stories/Header.stories.js">completed Header.stories.js on GitHub</a>.</p>
<h3 id="import-the-library-into-your-stories-file">Import the library into your stories file</h3>
<p>To integrate the VSR into your tests, import it in your test file. In this example, we’ll add the assertions into a <code>play</code> test, so we need <code>expect</code> from Storybook’s <code>test</code> library too.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { virtual } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@guidepup/virtual-screen-reader'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { expect } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@storybook/test'</span><span style="color:#E1E4E8">;</span></span></code></pre>
<h3 id="write-the-story-and-integration-test">Write the story and integration test</h3>
<p>See comments in-the-code below for details</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Default LoggedIn story</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#79B8FF"> LoggedIn</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  args: {</span></span>
<span class="line"><span style="color:#E1E4E8">    user: {</span></span>
<span class="line"><span style="color:#E1E4E8">      name: </span><span style="color:#9ECBFF">'Jane Doe'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#6A737D">  // add the play method - it's where you put your tests!</span></span>
<span class="line"><span style="color:#B392F0">  play</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> ({ </span><span style="color:#FFAB70">args</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">canvasElement</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">step</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">    // Start up the Virtual Screen Reader, giving it the canvasElement</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#E1E4E8"> virtual.</span><span style="color:#B392F0">start</span><span style="color:#E1E4E8">({ container: canvasElement });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // This `while` statement navigates through the component using the </span></span>
<span class="line"><span style="color:#6A737D">    //  Virtual Screen Reader to speak the text whereever the cursor is located.</span></span>
<span class="line"><span style="color:#6A737D">    //  It will continue until it reaches the end of the &#x3C;header> element, </span></span>
<span class="line"><span style="color:#6A737D">    //  which has a `banner` aria role, thus "end of banner"</span></span>
<span class="line"><span style="color:#F97583">    while</span><span style="color:#E1E4E8"> ((</span><span style="color:#F97583">await</span><span style="color:#E1E4E8"> virtual.</span><span style="color:#B392F0">lastSpokenPhrase</span><span style="color:#E1E4E8">()) </span><span style="color:#F97583">!==</span><span style="color:#9ECBFF"> "end of banner"</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">      // `.next()` moves the Virtual cursor to the next location.</span></span>
<span class="line"><span style="color:#F97583">      await</span><span style="color:#E1E4E8"> virtual.</span><span style="color:#B392F0">next</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // What we expect the screen reader to say</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> expected</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [</span></span>
<span class="line"><span style="color:#9ECBFF">      'banner'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#6A737D">      // it is an `&#x3C;h1>`, so `level 1`</span></span>
<span class="line"><span style="color:#9ECBFF">      'heading, Acme, level 1'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">      'Welcome,'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#6A737D">      // Using `args` here allows you to change args without breaking the test</span></span>
<span class="line"><span style="color:#E1E4E8">      args.user.name,</span></span>
<span class="line"><span style="color:#9ECBFF">      '!'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">      'button, Log out'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">      'end of banner'</span></span>
<span class="line"><span style="color:#E1E4E8">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Here's the test! It asserts the screen reader said what we expected.</span></span>
<span class="line"><span style="color:#6A737D">    //  When we called `lastSpokenPhrase` every time the `while` looped, </span></span>
<span class="line"><span style="color:#6A737D">    //  the spoken text was added to the `PhraseLog`, in order</span></span>
<span class="line"><span style="color:#B392F0">    expect</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">await</span><span style="color:#E1E4E8"> virtual.</span><span style="color:#B392F0">spokenPhraseLog</span><span style="color:#E1E4E8">()).</span><span style="color:#B392F0">toEqual</span><span style="color:#E1E4E8">(expected);</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    // Stop your Virtual Screen Reader instance</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#E1E4E8"> virtual.</span><span style="color:#B392F0">stop</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span></code></pre>
<p><img src="/blahg-assets/storybook-interaction-tests-showing-virtual-screen-reader.png" alt="Screenshot of test results in Storybook integration test using Virtual Screen Reader output"></p>
<h2 id="conclusion">Conclusion</h2>
<p>This example is simple on purpose so it can easily get the copypasta treatment. Once it works for you, dig into the <a href="https://www.guidepup.dev/docs/virtual">Virtual Screen Reader docs</a> and see how much more you can test for with this tool. Cheers!</p>  </article>  </main> <footer data-astro-cid-sz7xmlte> <hr data-astro-cid-sz7xmlte>
&copy; 2024&nbsp;Scott Nath All rights reserved.
</footer>  </body></html>