<!DOCTYPE html><html lang="en-US"> <head><script defer data-domain="scottnath.com" src="https://plausible.io/js/script.js" type="text/partytown"></script> <script defer data-domain="scottnath.com" src="https://plausible.io/js/script.outbound-links.js" type="text/partytown"></script> <!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-mind-blown.ico" id="favicon"><meta name="generator" content="Astro v4.4.2"><link rel="preload" as="image" href="/blahg-assets/simple-setup-guidepup-virtual-screen-reader-with-storybook.avif"><!-- Canonical URL --><link rel="canonical" href="https://scottnath.com/blahg/virtual-screen-reader-with-storybook/"><!-- Primary Meta Tags --><title>Simple setup: Virtual Screen Reader in Storybook</title><meta name="title" content="Simple setup: Virtual Screen Reader in Storybook"><meta name="description" content="How to set up Storybook with Guidepup's Virtual Screen Reader and test what the screen reader speaks"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://scottnath.com/blahg/virtual-screen-reader-with-storybook/"><meta property="og:title" content="Simple setup: Virtual Screen Reader in Storybook"><meta property="og:description" content="How to set up Storybook with Guidepup's Virtual Screen Reader and test what the screen reader speaks"><meta property="og:image" content="https://scottnath.com/blahg-assets/simple-setup-guidepup-virtual-screen-reader-with-storybook.avif"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://scottnath.com/blahg/virtual-screen-reader-with-storybook/"><meta property="twitter:title" content="Simple setup: Virtual Screen Reader in Storybook"><meta property="twitter:description" content="How to set up Storybook with Guidepup's Virtual Screen Reader and test what the screen reader speaks"><meta property="twitter:image" content="https://scottnath.com/blahg-assets/simple-setup-guidepup-virtual-screen-reader-with-storybook.avif"><link rel="stylesheet" href="/_astro/_slug_.BZZEeUR_.css" /><script type="module">const e=()=>{const i=document.querySelector("#favicon");if(document.hidden){const n=i?.href;document.initialFavicon=n,i.href="/favicon-clown.ico"}else document.initialFavicon!==""&&(i.href=document.initialFavicon)};document.addEventListener("visibilitychange",e,!0);document.initialFavicon=document.querySelector("#favicon").href;
</script>
<script>/** @license Copyright 2020 Google LLC (BSD-3-Clause) */
/** Bundled JS generated from "@astrojs/lit/client-shim.js" */
var N = Object.defineProperty;
var i = (t, n) => () => (t && (n = t((t = 0))), n);
var b = (t, n) => {
	for (var a in n) N(t, a, { get: n[a], enumerable: !0 });
};
function s() {
	if (d === void 0) {
		let t = document.createElement('div');
		(t.innerHTML = '<div><template shadowroot="open" shadowrootmode="open"></template></div>'),
			(d = !!t.firstElementChild.shadowRoot);
	}
	return d;
}
var d,
	m = i(() => {});
var p,
	c,
	f,
	u = i(() => {
		(p = (t) => t.parentElement === null),
			(c = (t) => t.tagName === 'TEMPLATE'),
			(f = (t) => t.nodeType === Node.ELEMENT_NODE);
	});
var h,
	E = i(() => {
		m();
		u();
		h = (t) => {
			var n;
			if (s()) return;
			let a = [],
				e = t.firstElementChild;
			for (; e !== t && e !== null; )
				if (c(e)) a.push(e), (e = e.content);
				else if (e.firstElementChild !== null) e = e.firstElementChild;
				else if (f(e) && e.nextElementSibling !== null) e = e.nextElementSibling;
				else {
					let o;
					for (; e !== t && e !== null; )
						if (p(e)) {
							o = a.pop();
							let r = o.parentElement,
								l = o.getAttribute('shadowroot');
							if (((e = o), l === 'open' || l === 'closed')) {
								let y = o.hasAttribute('shadowrootdelegatesfocus');
								try {
									r.attachShadow({ mode: l, delegatesFocus: y }).append(o.content);
								} catch {}
							} else o = void 0;
						} else {
							let r = e.nextElementSibling;
							if (r != null) {
								(e = r), o !== void 0 && o.parentElement.removeChild(o);
								break;
							}
							let l =
								(n = e.parentElement) === null || n === void 0 ? void 0 : n.nextElementSibling;
							if (l != null) {
								(e = l), o !== void 0 && o.parentElement.removeChild(o);
								break;
							}
							(e = e.parentElement), o !== void 0 && (o.parentElement.removeChild(o), (o = void 0));
						}
				}
		};
	});
var w = i(() => {
	E();
});
var v = {};
b(v, { hasNativeDeclarativeShadowRoots: () => s, hydrateShadowRoots: () => h });
var S = i(() => {
	m();
	w();
});
async function g() {
	let { hydrateShadowRoots: t } = await Promise.resolve().then(() => (S(), v));
	window.addEventListener('DOMContentLoaded', () => t(document.body), { once: true });
}
var x = new DOMParser()
	.parseFromString(
		'<p><template shadowroot="open" shadowrootmode="open"></template></p>',
		'text/html',
		{
			includeShadowRoots: !0,
		}
	)
	.querySelector('p');
(!x || !x.shadowRoot) && g();
</script>
<script>!(function(w,p,f,c){c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.8.0 - MIT builder.io */
!function(t,e,n,i,r,o,a,d,s,c,l,p){function u(){p||(p=1,"/"==(a=(o.lib||"/~partytown/")+(o.debug?"debug/":""))[0]&&(s=e.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(f,1e4),e.addEventListener("pt0",w),r?h(1):n.serviceWorker?n.serviceWorker.register(a+(o.swPath||"partytown-sw.js"),{scope:a}).then((function(t){t.active?h():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&h()}))}),console.error):f())))}function h(t){c=e.createElement(t?"script":"iframe"),t||(c.setAttribute("style","display:block;width:0;height:0;border:0;visibility:hidden"),c.setAttribute("aria-hidden",!0)),c.src=a+"partytown-"+(t?"atomics.js?v=0.8.0":"sandbox-sw.html?"+Date.now()),e.querySelector(o.sandboxParent||"body").appendChild(c)}function f(n,r){for(w(),i==t&&(o.forward||[]).map((function(e){delete t[e.split(".")[0]]})),n=0;n<s.length;n++)(r=e.createElement("script")).innerHTML=s[n].innerHTML,e.head.appendChild(r);c&&c.parentNode.removeChild(c)}function w(){clearTimeout(d)}o=t.partytown||{},i==t&&(o.forward||[]).map((function(e){l=t,e.split(".").map((function(e,n,i){l=l[i[n]]=n+1<i.length?"push"==i[n+1]?[]:l[i[n]]||{}:function(){(t._ptf=t._ptf||[]).push(i,arguments)}}))})),"complete"==e.readyState?u():(t.addEventListener("DOMContentLoaded",u),t.addEventListener("load",u))}(window,document,navigator,top,window.crossOriginIsolated);;((d,s)=>(s=d.currentScript,d.addEventListener('astro:before-swap',()=>s.remove(),{once:true})))(document);</script><style>[data-astro-transition-scope="astro-x3xkme5z-1"] { view-transition-name: astro-x3xkme5z-1; }@layer astro { ::view-transition-old(astro-x3xkme5z-1) { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }::view-transition-new(astro-x3xkme5z-1) { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back]::view-transition-old(astro-x3xkme5z-1) { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back]::view-transition-new(astro-x3xkme5z-1) { 
	animation-name: astroFadeIn, astroSlideFromLeft; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-x3xkme5z-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-x3xkme5z-1"] { 
	animation-name: astroFadeIn, astroSlideFromLeft; }</style></head> <body> <a href="#main" id="skip-to-main">Skip to main content</a> <header data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2> <span class="name" data-astro-cid-3ef6ksr2>Scott Nath</span> <span class="title" data-astro-cid-3ef6ksr2>Frontend Architect</span> </h2> <nav data-astro-cid-2hp2wczs> <dope-stripes data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>:host{display:block;position:relative;--angle-x-start: 35%;--angle-width: 5%;--angle-y-end: 40px;--stripe-height: 16px;--stripe-color: #ffe27a;width:100%;min-height:var(--stripe-height)}::slotted(dope-stripe),dope-stripe{--no-top-margin: -1}dope-stripe:first-child{--no-top-margin: 0}.stripes:not(:has(dope-stripe)) ::slotted(dope-stripe:first-child){--no-top-margin: 0}</style><!--lit-part grV36YUwDSo=--><div class="stripes" part="stripes" exportparts="stripe">
      <!--lit-part--><!--/lit-part-->
      <slot></slot>
  </div><!--/lit-part--></template> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ffd273"><slot></slot></div><!--/lit-part--></template> <a href="/" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>home</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ffbf57"><slot></slot></div><!--/lit-part--></template> <a href="/whoami" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>whoami</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ffa43b"><slot></slot></div><!--/lit-part--></template> <a href="/blahg" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>blahg</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ff8920"><slot></slot></div><!--/lit-part--></template> <a href="/resume" data-astro-cid-2hp2wczs data-astro-cid-eimmu3lg> <span data-astro-cid-2hp2wczs>resume</span> </a>  </dope-stripe> <dope-stripe defer-hydration data-astro-cid-2hp2wczs="true"><template shadowroot="open" shadowrootmode="open"><style>
    :host {
      --angle-x-start: 35%;
      --angle-width: 5%;
      --angle-y-end: 40px;
      --stripe-height: 16px;
      --stripe-color:#ffe27a;
      --top-margin: var(--no-top-margin, 0);

      --angle-x-end: calc(var(--angle-x-start) + var(--angle-width));
      --stripe-box-height: calc(var(--angle-y-end) + var(--stripe-height));
      --angle-y-right-bottom: calc(var(--angle-y-end) + var(--stripe-height));

      --polygon-path: 
        0 0, 
        var(--angle-x-start) 0, 
        var(--angle-x-end) var(--angle-y-end), 
        100% var(--angle-y-end), 
        100% var(--stripe-box-height), 
        var(--angle-x-end) var(--stripe-box-height), 
        var(--angle-x-start) var(--stripe-height), 
        0 var(--stripe-height);

      width: 100%;
      position: relative;
      display: block;
      margin-top: calc((var(--angle-y-end) + 1px) * var(--top-margin));
      clip-path: polygon(var(--polygon-path));
    }

    [part=stripe] {
      background-color: var(--stripe-color);
      width: 100%;
      height: var(--stripe-box-height);
      position: relative;
    }
  </style><!--lit-part 2hRJq3MaOiM=--><!--lit-node 0--><div part="stripe" style="--stripe-color: #ff6e05"><slot></slot></div><!--/lit-part--></template></dope-stripe> </dope-stripes> </nav>  <img src="/scott-nath-profile-photo.avif" alt="Scott Nath's picture" width="400" height="400" class="avatar" data-astro-cid-3ef6ksr2> <address class="socials" aria-label="Also find me on these sites" data-astro-cid-6jz5wqfy> <a rel="me" href="https://github.com/scottnath" aria-label="Scott Nath on GitHub" data-astro-cid-6jz5wqfy><img src="/_astro/github-inverse.5c5sSg3g.svg" alt="GitHub logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>GitHub</span></a><a rel="me" href="https://dev.to/scottnath" aria-label="Scott Nath's articles on dev.to" data-astro-cid-6jz5wqfy><img src="/_astro/dev.DPyAJ8Ri.svg" alt="dev.to logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>dev.to</span></a><a rel="me" href="https://linkedin.com/in/scottnath" aria-label="Connect with Scott Nath on LinkedIn" data-astro-cid-6jz5wqfy><img src="/_astro/linkedin.C92OM-O6.svg" alt="LinkedIn logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>LinkedIn</span></a><a rel="me" href="https://mastodon.social/@scottnath" aria-label="Read Scott Nath blah on Mastodon" data-astro-cid-6jz5wqfy><img src="/_astro/Mastodon.QaBq5b1c.svg" alt="Mastodon logo" aria-hidden="true" data-astro-cid-6jz5wqfy><span data-astro-cid-6jz5wqfy>Mastodon</span></a> </address>  </header>  <main id="main" data-astro-transition-scope="astro-x3xkme5z-1">  <article class="blog-post"> <img width="100%" height="auto" src="/blahg-assets/simple-setup-guidepup-virtual-screen-reader-with-storybook.avif" alt=""> <h1 class="title">Simple setup: Virtual Screen Reader in Storybook</h1> <p>How to set up Storybook with Guidepup&#39;s Virtual Screen Reader and test what the screen reader speaks</p> <time datetime="2024-03-01T00:00:00.000Z"> Mar 1, 2024 </time>  <hr> <div class="readable"> <p>Recent changes to the <a href="https://github.com/guidepup/virtual-screen-reader">@guidepup Virtual Screen Reader library</a> make it ridiculously easy to integrate into Storybook for use in your integration tests. This article shows how to get the basic setup going and how to write your first screen reader test in Storybook.</p>
<h2 id="tldr">tl;dr</h2>
<p>The Virtual Screen Reader is a great tool to mimic screen reader output and it’s works in Storybook without addons or configuration changes.</p>
<ul>
<li><a href="https://github.com/scottnath/virtual-screen-reader-storybook">Example GitHub repo</a></li>
<li><a href="https://github.com/scottnath/virtual-screen-reader-storybook/blob/main/stories/Header.stories.js">Example story file with VSR</a></li>
<li><a href="https://stackblitz.com/~/github.com/scottnath/virtual-screen-reader-storybook">Running app on Stackblitz</a></li>
<li><a href="https://www.guidepup.dev/docs/virtual">Virtual Screen Reader docs</a></li>
</ul>
<h2 id="what-is-the-virtual-screen-reader">What is the Virtual Screen Reader?</h2>
<p>The Virtual Screen Reader (<a href="https://www.guidepup.dev/docs/virtual">docs</a>, <a href="https://github.com/guidepup/virtual-screen-reader">GitHub</a>) is a library, available via NPM, which mimics the functionality of a screen reader. The VSR is from Guidepup (<a href="https://guidepup.dev/">guidepup.dev</a>), which has tons of screen reader tooling. The Virtual Screen Reader is the easiest @guidepup tool to set up and it can read your components like a screen reader would, giving you back the text for use in testing.</p>
<p>FYI: <em>Guidepup has a suite of tools that mirror and/or directly-simulate screen reader experiences and capture the results.  The tools are impressive and worth checking out if you want to automate accessibility testing into your workflow. For example, you can use directly use the system NVDA or Mac VoiceOver via Playwright. (check out <a href="https://dev.to/craigmorten/a11y-unlocked-screen-reader-automation-tests-3mc8">Craig’s dev.to article on implementing Guidepup with Playwright and Mac VoiceOver</a> for details)</em></p>
<h2 id="how-does-the-screen-reader-interpret-a-chunk-of-html">How does the screen reader interpret a chunk of HTML?</h2>
<p>Screen readers vary in interpretation, but this gives a <em>rough</em> understanding of how your HTML could get broken down by the VSR.</p>
<p>If the HTML a component puts out is this:</p>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">header</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">  &#x3C;</span><span style="color:#569CD6">div</span><span style="color:#9CDCFE"> class</span><span style="color:#E6E6E6">=</span><span style="color:#CE9178">"storybook-header"</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">    &#x3C;</span><span style="color:#569CD6">div</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">      &#x3C;</span><span style="color:#569CD6">svg</span><span style="color:#808080">></span><span style="color:#E6E6E6">...</span><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">svg</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">      &#x3C;</span><span style="color:#569CD6">h1</span><span style="color:#808080">></span><span style="color:#E6E6E6">Acme</span><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">h1</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">    &#x3C;/</span><span style="color:#569CD6">div</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">    &#x3C;</span><span style="color:#569CD6">div</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">      &#x3C;</span><span style="color:#569CD6">span</span><span style="color:#9CDCFE"> class</span><span style="color:#E6E6E6">=</span><span style="color:#CE9178">"welcome"</span><span style="color:#808080">></span><span style="color:#E6E6E6">Welcome, </span><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">b</span><span style="color:#808080">></span><span style="color:#E6E6E6">Jane Doe</span><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">b</span><span style="color:#808080">></span><span style="color:#E6E6E6">!</span><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">span</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">      &#x3C;</span><span style="color:#569CD6">button</span><span style="color:#9CDCFE"> type</span><span style="color:#E6E6E6">=</span><span style="color:#CE9178">"button"</span><span style="color:#9CDCFE"> class</span><span style="color:#E6E6E6">=</span><span style="color:#CE9178">"..."</span><span style="color:#808080">></span><span style="color:#E6E6E6">Log out</span><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">button</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">    &#x3C;/</span><span style="color:#569CD6">div</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">  &#x3C;/</span><span style="color:#569CD6">div</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">header</span><span style="color:#808080">></span></span></code></pre>
<p>This is what the Virtual Screen Reader will translate it into:</p>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">header</span><span style="color:#808080">></span><span style="color:#6A9955"> &#x3C;!--BANNER--></span></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">h1</span><span style="color:#808080">></span><span style="color:#E6E6E6">Acme</span><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">h1</span><span style="color:#808080">></span><span style="color:#6A9955"> &#x3C;!--HEADING + text + HEADING-LEVEL--></span></span>
<span class="line"><span style="color:#E6E6E6">Welcome, </span><span style="color:#6A9955">&#x3C;!--Text--></span></span>
<span class="line"><span style="color:#E6E6E6">Jane Doe </span><span style="color:#6A9955">&#x3C;!--Text--></span></span>
<span class="line"><span style="color:#E6E6E6">! </span><span style="color:#6A9955">&#x3C;!--Punctuation--></span></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">button</span><span style="color:#808080">></span><span style="color:#E6E6E6">Log out</span><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">button</span><span style="color:#808080">></span><span style="color:#6A9955"> &#x3C;!--BUTTON + text--></span></span>
<span class="line"><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">header</span><span style="color:#808080">></span><span style="color:#6A9955"> &#x3C;!--END OF BANNER--></span></span></code></pre>
<h2 id="how-to-set-up-your-storybook-instance-to-use-the-virtual-screen-reader">How to set up your Storybook instance to use the Virtual Screen Reader</h2>
<p>Follow these steps to test with VSR in your Storybook environment:</p>
<ol>
<li>Ensure your storybook environment is set up for Interaction tests (see <a href="https://storybook.js.org/docs/writing-tests/interaction-testing#set-up-the-interactions-addon">Storybook setup docs</a>)</li>
<li>Install the VSR npm module
<code>npm i @guidepup/virtual-screen-reader -D</code></li>
<li><em>PROFIT</em> - <strong>No addon setup or other configuration needed!</strong></li>
</ol>
<h2 id="how-to-write-a-storybook-integration-test-that-uses-the-virtual-screen-reader">How to write a Storybook integration test that uses the Virtual Screen Reader</h2>
<p>This example is using the default Header component that installs with default Storybook. We’ll be adding Interaction tests which will use VSR. You can see the <a href="https://github.com/scottnath/virtual-screen-reader-storybook/blob/main/stories/Header.stories.js">completed Header.stories.js on GitHub</a>.</p>
<h3 id="import-the-library-into-your-stories-file">Import the library into your stories file</h3>
<p>To integrate the VSR into your tests, import it in your test file. In this example, we’ll add the assertions into a <code>play</code> test, so we need <code>expect</code> from Storybook’s <code>test</code> library too.</p>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#C586C0">import</span><span style="color:#E6E6E6"> { </span><span style="color:#9CDCFE">virtual</span><span style="color:#E6E6E6"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@guidepup/virtual-screen-reader'</span><span style="color:#E6E6E6">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#E6E6E6"> { </span><span style="color:#9CDCFE">expect</span><span style="color:#E6E6E6"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@storybook/test'</span><span style="color:#E6E6E6">;</span></span></code></pre>
<h3 id="write-the-story-and-integration-test">Write the story and integration test</h3>
<p>See comments in-the-code below for details</p>
<pre class="astro-code slack-dark" style="background-color:#222222;color:#E6E6E6; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6A9955">// Default LoggedIn story</span></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#9CDCFE"> LoggedIn</span><span style="color:#D4D4D4"> =</span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#9CDCFE">  args:</span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#9CDCFE">    user:</span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#9CDCFE">      name:</span><span style="color:#CE9178"> 'Jane Doe'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#E6E6E6">    },</span></span>
<span class="line"><span style="color:#E6E6E6">  },</span></span>
<span class="line"><span style="color:#6A9955">  // add the play method - it's where you put your tests!</span></span>
<span class="line"><span style="color:#DCDCAA">  play</span><span style="color:#9CDCFE">:</span><span style="color:#569CD6"> async</span><span style="color:#E6E6E6"> ({ </span><span style="color:#9CDCFE">args</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">canvasElement</span><span style="color:#E6E6E6">, </span><span style="color:#9CDCFE">step</span><span style="color:#E6E6E6"> }) </span><span style="color:#569CD6">=></span><span style="color:#E6E6E6"> {</span></span>
<span class="line"><span style="color:#6A9955">    // Start up the Virtual Screen Reader, giving it the canvasElement</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#9CDCFE"> virtual</span><span style="color:#E6E6E6">.</span><span style="color:#DCDCAA">start</span><span style="color:#E6E6E6">({ </span><span style="color:#9CDCFE">container:</span><span style="color:#9CDCFE"> canvasElement</span><span style="color:#E6E6E6"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">    // This `while` statement navigates through the component using the </span></span>
<span class="line"><span style="color:#6A9955">    //  Virtual Screen Reader to speak the text whereever the cursor is located.</span></span>
<span class="line"><span style="color:#6A9955">    //  It will continue until it reaches the end of the &#x3C;header> element, </span></span>
<span class="line"><span style="color:#6A9955">    //  which has a `banner` aria role, thus "end of banner"</span></span>
<span class="line"><span style="color:#C586C0">    while</span><span style="color:#E6E6E6"> ((</span><span style="color:#C586C0">await</span><span style="color:#9CDCFE"> virtual</span><span style="color:#E6E6E6">.</span><span style="color:#DCDCAA">lastSpokenPhrase</span><span style="color:#E6E6E6">()) </span><span style="color:#D4D4D4">!==</span><span style="color:#CE9178"> "end of banner"</span><span style="color:#E6E6E6">) {</span></span>
<span class="line"><span style="color:#6A9955">      // `.next()` moves the Virtual cursor to the next location.</span></span>
<span class="line"><span style="color:#C586C0">      await</span><span style="color:#9CDCFE"> virtual</span><span style="color:#E6E6E6">.</span><span style="color:#DCDCAA">next</span><span style="color:#E6E6E6">();</span></span>
<span class="line"><span style="color:#E6E6E6">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">    // What we expect the screen reader to say</span></span>
<span class="line"><span style="color:#569CD6">    const</span><span style="color:#9CDCFE"> expected</span><span style="color:#D4D4D4"> =</span><span style="color:#E6E6E6"> [</span></span>
<span class="line"><span style="color:#CE9178">      'banner'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#6A9955">      // it is an `&#x3C;h1>`, so `level 1`</span></span>
<span class="line"><span style="color:#CE9178">      'heading, Acme, level 1'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#CE9178">      'Welcome,'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#6A9955">      // Using `args` here allows you to change args without breaking the test</span></span>
<span class="line"><span style="color:#9CDCFE">      args</span><span style="color:#E6E6E6">.</span><span style="color:#9CDCFE">user</span><span style="color:#E6E6E6">.</span><span style="color:#9CDCFE">name</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#CE9178">      '!'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#CE9178">      'button, Log out'</span><span style="color:#E6E6E6">,</span></span>
<span class="line"><span style="color:#CE9178">      'end of banner'</span></span>
<span class="line"><span style="color:#E6E6E6">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">    // Here's the test! It asserts the screen reader said what we expected.</span></span>
<span class="line"><span style="color:#6A9955">    //  When we called `lastSpokenPhrase` every time the `while` looped, </span></span>
<span class="line"><span style="color:#6A9955">    //  the spoken text was added to the `PhraseLog`, in order</span></span>
<span class="line"><span style="color:#DCDCAA">    expect</span><span style="color:#E6E6E6">(</span><span style="color:#C586C0">await</span><span style="color:#9CDCFE"> virtual</span><span style="color:#E6E6E6">.</span><span style="color:#DCDCAA">spokenPhraseLog</span><span style="color:#E6E6E6">()).</span><span style="color:#DCDCAA">toEqual</span><span style="color:#E6E6E6">(</span><span style="color:#9CDCFE">expected</span><span style="color:#E6E6E6">);</span></span>
<span class="line"><span style="color:#E6E6E6">    </span></span>
<span class="line"><span style="color:#6A9955">    // Stop your Virtual Screen Reader instance</span></span>
<span class="line"><span style="color:#C586C0">    await</span><span style="color:#9CDCFE"> virtual</span><span style="color:#E6E6E6">.</span><span style="color:#DCDCAA">stop</span><span style="color:#E6E6E6">();</span></span>
<span class="line"><span style="color:#E6E6E6">  }</span></span>
<span class="line"><span style="color:#E6E6E6">};</span></span>
<span class="line"></span></code></pre>
<p><img src="/blahg-assets/storybook-interaction-tests-showing-virtual-screen-reader.avif" alt="Screenshot of test results in Storybook integration test using Virtual Screen Reader output"></p>
<h2 id="conclusion">Conclusion</h2>
<p>This example is simple on purpose so it can easily get the copypasta treatment. Once it works for you, dig into the <a href="https://www.guidepup.dev/docs/virtual">Virtual Screen Reader docs</a> and see how much more you can test for with this tool. Cheers!</p> </div> </article>  </main> <footer data-astro-cid-sz7xmlte> <hr data-astro-cid-sz7xmlte>
&copy; 2024&nbsp;Scott Nath All rights reserved.
</footer>  </body></html>